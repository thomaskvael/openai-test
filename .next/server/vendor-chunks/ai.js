"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/ai";
exports.ids = ["vendor-chunks/ai"];
exports.modules = {

/***/ "(ssr)/./node_modules/ai/node_modules/nanoid/index.js":
/*!******************************************************!*\
  !*** ./node_modules/ai/node_modules/nanoid/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customAlphabet: () => (/* binding */ customAlphabet),\n/* harmony export */   customRandom: () => (/* binding */ customRandom),\n/* harmony export */   nanoid: () => (/* binding */ nanoid),\n/* harmony export */   random: () => (/* binding */ random),\n/* harmony export */   urlAlphabet: () => (/* reexport safe */ _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url-alphabet/index.js */ \"(ssr)/./node_modules/ai/node_modules/nanoid/url-alphabet/index.js\");\n\n\nconst POOL_SIZE_MULTIPLIER = 128;\nlet pool, poolOffset;\nlet fillPool = (bytes)=>{\n    if (!pool || pool.length < bytes) {\n        pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER);\n        crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync(pool);\n        poolOffset = 0;\n    } else if (poolOffset + bytes > pool.length) {\n        crypto__WEBPACK_IMPORTED_MODULE_0__.randomFillSync(pool);\n        poolOffset = 0;\n    }\n    poolOffset += bytes;\n};\nlet random = (bytes)=>{\n    fillPool(bytes -= 0);\n    return pool.subarray(poolOffset - bytes, poolOffset);\n};\nlet customRandom = (alphabet, defaultSize, getRandom)=>{\n    let mask = (2 << 31 - Math.clz32(alphabet.length - 1 | 1)) - 1;\n    let step = Math.ceil(1.6 * mask * defaultSize / alphabet.length);\n    return (size = defaultSize)=>{\n        let id = \"\";\n        while(true){\n            let bytes = getRandom(step);\n            let i = step;\n            while(i--){\n                id += alphabet[bytes[i] & mask] || \"\";\n                if (id.length === size) return id;\n            }\n        }\n    };\n};\nlet customAlphabet = (alphabet, size = 21)=>customRandom(alphabet, size, random);\nlet nanoid = (size = 21)=>{\n    fillPool(size -= 0);\n    let id = \"\";\n    for(let i = poolOffset - size; i < poolOffset; i++){\n        id += _url_alphabet_index_js__WEBPACK_IMPORTED_MODULE_1__.urlAlphabet[pool[i] & 63];\n    }\n    return id;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWkvbm9kZV9tb2R1bGVzL25hbm9pZC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJCO0FBQzBCO0FBQ3JELE1BQU1FLHVCQUF1QjtBQUM3QixJQUFJQyxNQUFNQztBQUNWLElBQUlDLFdBQVdDLENBQUFBO0lBQ2IsSUFBSSxDQUFDSCxRQUFRQSxLQUFLSSxNQUFNLEdBQUdELE9BQU87UUFDaENILE9BQU9LLE9BQU9DLFdBQVcsQ0FBQ0gsUUFBUUo7UUFDbENGLGtEQUFxQixDQUFDRztRQUN0QkMsYUFBYTtJQUNmLE9BQU8sSUFBSUEsYUFBYUUsUUFBUUgsS0FBS0ksTUFBTSxFQUFFO1FBQzNDUCxrREFBcUIsQ0FBQ0c7UUFDdEJDLGFBQWE7SUFDZjtJQUNBQSxjQUFjRTtBQUNoQjtBQUNBLElBQUlLLFNBQVNMLENBQUFBO0lBQ1hELFNBQVVDLFNBQVM7SUFDbkIsT0FBT0gsS0FBS1MsUUFBUSxDQUFDUixhQUFhRSxPQUFPRjtBQUMzQztBQUNBLElBQUlTLGVBQWUsQ0FBQ0MsVUFBVUMsYUFBYUM7SUFDekMsSUFBSUMsT0FBTyxDQUFDLEtBQU0sS0FBS0MsS0FBS0MsS0FBSyxDQUFDLFNBQVVaLE1BQU0sR0FBRyxJQUFLLEVBQUUsSUFBSztJQUNqRSxJQUFJYSxPQUFPRixLQUFLRyxJQUFJLENBQUMsTUFBT0osT0FBT0YsY0FBZUQsU0FBU1AsTUFBTTtJQUNqRSxPQUFPLENBQUNlLE9BQU9QLFdBQVc7UUFDeEIsSUFBSVEsS0FBSztRQUNULE1BQU8sS0FBTTtZQUNYLElBQUlqQixRQUFRVSxVQUFVSTtZQUN0QixJQUFJSSxJQUFJSjtZQUNSLE1BQU9JLElBQUs7Z0JBQ1ZELE1BQU1ULFFBQVEsQ0FBQ1IsS0FBSyxDQUFDa0IsRUFBRSxHQUFHUCxLQUFLLElBQUk7Z0JBQ25DLElBQUlNLEdBQUdoQixNQUFNLEtBQUtlLE1BQU0sT0FBT0M7WUFDakM7UUFDRjtJQUNGO0FBQ0Y7QUFDQSxJQUFJRSxpQkFBaUIsQ0FBQ1gsVUFBVVEsT0FBTyxFQUFFLEdBQ3ZDVCxhQUFhQyxVQUFVUSxNQUFNWDtBQUMvQixJQUFJZSxTQUFTLENBQUNKLE9BQU8sRUFBRTtJQUNyQmpCLFNBQVVpQixRQUFRO0lBQ2xCLElBQUlDLEtBQUs7SUFDVCxJQUFLLElBQUlDLElBQUlwQixhQUFha0IsTUFBTUUsSUFBSXBCLFlBQVlvQixJQUFLO1FBQ25ERCxNQUFNdEIsK0RBQVcsQ0FBQ0UsSUFBSSxDQUFDcUIsRUFBRSxHQUFHLEdBQUc7SUFDakM7SUFDQSxPQUFPRDtBQUNUO0FBQ29FIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3BlbmFpLXRlc3QtMS8uL25vZGVfbW9kdWxlcy9haS9ub2RlX21vZHVsZXMvbmFub2lkL2luZGV4LmpzP2FkNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5pbXBvcnQgeyB1cmxBbHBoYWJldCB9IGZyb20gJy4vdXJsLWFscGhhYmV0L2luZGV4LmpzJ1xuY29uc3QgUE9PTF9TSVpFX01VTFRJUExJRVIgPSAxMjhcbmxldCBwb29sLCBwb29sT2Zmc2V0XG5sZXQgZmlsbFBvb2wgPSBieXRlcyA9PiB7XG4gIGlmICghcG9vbCB8fCBwb29sLmxlbmd0aCA8IGJ5dGVzKSB7XG4gICAgcG9vbCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShieXRlcyAqIFBPT0xfU0laRV9NVUxUSVBMSUVSKVxuICAgIGNyeXB0by5yYW5kb21GaWxsU3luYyhwb29sKVxuICAgIHBvb2xPZmZzZXQgPSAwXG4gIH0gZWxzZSBpZiAocG9vbE9mZnNldCArIGJ5dGVzID4gcG9vbC5sZW5ndGgpIHtcbiAgICBjcnlwdG8ucmFuZG9tRmlsbFN5bmMocG9vbClcbiAgICBwb29sT2Zmc2V0ID0gMFxuICB9XG4gIHBvb2xPZmZzZXQgKz0gYnl0ZXNcbn1cbmxldCByYW5kb20gPSBieXRlcyA9PiB7XG4gIGZpbGxQb29sKChieXRlcyAtPSAwKSlcbiAgcmV0dXJuIHBvb2wuc3ViYXJyYXkocG9vbE9mZnNldCAtIGJ5dGVzLCBwb29sT2Zmc2V0KVxufVxubGV0IGN1c3RvbVJhbmRvbSA9IChhbHBoYWJldCwgZGVmYXVsdFNpemUsIGdldFJhbmRvbSkgPT4ge1xuICBsZXQgbWFzayA9ICgyIDw8ICgzMSAtIE1hdGguY2x6MzIoKGFscGhhYmV0Lmxlbmd0aCAtIDEpIHwgMSkpKSAtIDFcbiAgbGV0IHN0ZXAgPSBNYXRoLmNlaWwoKDEuNiAqIG1hc2sgKiBkZWZhdWx0U2l6ZSkgLyBhbHBoYWJldC5sZW5ndGgpXG4gIHJldHVybiAoc2l6ZSA9IGRlZmF1bHRTaXplKSA9PiB7XG4gICAgbGV0IGlkID0gJydcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgbGV0IGJ5dGVzID0gZ2V0UmFuZG9tKHN0ZXApXG4gICAgICBsZXQgaSA9IHN0ZXBcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgaWQgKz0gYWxwaGFiZXRbYnl0ZXNbaV0gJiBtYXNrXSB8fCAnJ1xuICAgICAgICBpZiAoaWQubGVuZ3RoID09PSBzaXplKSByZXR1cm4gaWRcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmxldCBjdXN0b21BbHBoYWJldCA9IChhbHBoYWJldCwgc2l6ZSA9IDIxKSA9PlxuICBjdXN0b21SYW5kb20oYWxwaGFiZXQsIHNpemUsIHJhbmRvbSlcbmxldCBuYW5vaWQgPSAoc2l6ZSA9IDIxKSA9PiB7XG4gIGZpbGxQb29sKChzaXplIC09IDApKVxuICBsZXQgaWQgPSAnJ1xuICBmb3IgKGxldCBpID0gcG9vbE9mZnNldCAtIHNpemU7IGkgPCBwb29sT2Zmc2V0OyBpKyspIHtcbiAgICBpZCArPSB1cmxBbHBoYWJldFtwb29sW2ldICYgNjNdXG4gIH1cbiAgcmV0dXJuIGlkXG59XG5leHBvcnQgeyBuYW5vaWQsIGN1c3RvbUFscGhhYmV0LCBjdXN0b21SYW5kb20sIHVybEFscGhhYmV0LCByYW5kb20gfVxuIl0sIm5hbWVzIjpbImNyeXB0byIsInVybEFscGhhYmV0IiwiUE9PTF9TSVpFX01VTFRJUExJRVIiLCJwb29sIiwicG9vbE9mZnNldCIsImZpbGxQb29sIiwiYnl0ZXMiLCJsZW5ndGgiLCJCdWZmZXIiLCJhbGxvY1Vuc2FmZSIsInJhbmRvbUZpbGxTeW5jIiwicmFuZG9tIiwic3ViYXJyYXkiLCJjdXN0b21SYW5kb20iLCJhbHBoYWJldCIsImRlZmF1bHRTaXplIiwiZ2V0UmFuZG9tIiwibWFzayIsIk1hdGgiLCJjbHozMiIsInN0ZXAiLCJjZWlsIiwic2l6ZSIsImlkIiwiaSIsImN1c3RvbUFscGhhYmV0IiwibmFub2lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ai/node_modules/nanoid/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/ai/node_modules/nanoid/non-secure/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/ai/node_modules/nanoid/non-secure/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customAlphabet: () => (/* binding */ customAlphabet),\n/* harmony export */   nanoid: () => (/* binding */ nanoid)\n/* harmony export */ });\nlet urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\nlet customAlphabet = (alphabet, defaultSize = 21)=>{\n    return (size = defaultSize)=>{\n        let id = \"\";\n        let i = size;\n        while(i--){\n            id += alphabet[Math.random() * alphabet.length | 0];\n        }\n        return id;\n    };\n};\nlet nanoid = (size = 21)=>{\n    let id = \"\";\n    let i = size;\n    while(i--){\n        id += urlAlphabet[Math.random() * 64 | 0];\n    }\n    return id;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWkvbm9kZV9tb2R1bGVzL25hbm9pZC9ub24tc2VjdXJlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBSUEsY0FDRjtBQUNGLElBQUlDLGlCQUFpQixDQUFDQyxVQUFVQyxjQUFjLEVBQUU7SUFDOUMsT0FBTyxDQUFDQyxPQUFPRCxXQUFXO1FBQ3hCLElBQUlFLEtBQUs7UUFDVCxJQUFJQyxJQUFJRjtRQUNSLE1BQU9FLElBQUs7WUFDVkQsTUFBTUgsUUFBUSxDQUFDLEtBQU1NLE1BQU0sS0FBS04sU0FBU08sTUFBTSxHQUFJLEVBQUU7UUFDdkQ7UUFDQSxPQUFPSjtJQUNUO0FBQ0Y7QUFDQSxJQUFJSyxTQUFTLENBQUNOLE9BQU8sRUFBRTtJQUNyQixJQUFJQyxLQUFLO0lBQ1QsSUFBSUMsSUFBSUY7SUFDUixNQUFPRSxJQUFLO1FBQ1ZELE1BQU1MLFdBQVcsQ0FBQyxLQUFNUSxNQUFNLEtBQUssS0FBTSxFQUFFO0lBQzdDO0lBQ0EsT0FBT0g7QUFDVDtBQUNpQyIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haS10ZXN0LTEvLi9ub2RlX21vZHVsZXMvYWkvbm9kZV9tb2R1bGVzL25hbm9pZC9ub24tc2VjdXJlL2luZGV4LmpzPzM3NGYiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHVybEFscGhhYmV0ID1cbiAgJ3VzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QnXG5sZXQgY3VzdG9tQWxwaGFiZXQgPSAoYWxwaGFiZXQsIGRlZmF1bHRTaXplID0gMjEpID0+IHtcbiAgcmV0dXJuIChzaXplID0gZGVmYXVsdFNpemUpID0+IHtcbiAgICBsZXQgaWQgPSAnJ1xuICAgIGxldCBpID0gc2l6ZVxuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlkICs9IGFscGhhYmV0WyhNYXRoLnJhbmRvbSgpICogYWxwaGFiZXQubGVuZ3RoKSB8IDBdXG4gICAgfVxuICAgIHJldHVybiBpZFxuICB9XG59XG5sZXQgbmFub2lkID0gKHNpemUgPSAyMSkgPT4ge1xuICBsZXQgaWQgPSAnJ1xuICBsZXQgaSA9IHNpemVcbiAgd2hpbGUgKGktLSkge1xuICAgIGlkICs9IHVybEFscGhhYmV0WyhNYXRoLnJhbmRvbSgpICogNjQpIHwgMF1cbiAgfVxuICByZXR1cm4gaWRcbn1cbmV4cG9ydCB7IG5hbm9pZCwgY3VzdG9tQWxwaGFiZXQgfVxuIl0sIm5hbWVzIjpbInVybEFscGhhYmV0IiwiY3VzdG9tQWxwaGFiZXQiLCJhbHBoYWJldCIsImRlZmF1bHRTaXplIiwic2l6ZSIsImlkIiwiaSIsIk1hdGgiLCJyYW5kb20iLCJsZW5ndGgiLCJuYW5vaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ai/node_modules/nanoid/non-secure/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/ai/node_modules/nanoid/url-alphabet/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/ai/node_modules/nanoid/url-alphabet/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   urlAlphabet: () => (/* binding */ urlAlphabet)\n/* harmony export */ });\nlet urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\";\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWkvbm9kZV9tb2R1bGVzL25hbm9pZC91cmwtYWxwaGFiZXQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUlBLGNBQ0Y7QUFDb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vcGVuYWktdGVzdC0xLy4vbm9kZV9tb2R1bGVzL2FpL25vZGVfbW9kdWxlcy9uYW5vaWQvdXJsLWFscGhhYmV0L2luZGV4LmpzPzNiNTEiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHVybEFscGhhYmV0ID1cbiAgJ3VzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3QnXG5leHBvcnQgeyB1cmxBbHBoYWJldCB9XG4iXSwibmFtZXMiOlsidXJsQWxwaGFiZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ai/node_modules/nanoid/url-alphabet/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/ai/react/dist/index.mjs":
/*!**********************************************!*\
  !*** ./node_modules/ai/react/dist/index.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   experimental_useAssistant: () => (/* binding */ experimental_useAssistant),\n/* harmony export */   useChat: () => (/* binding */ useChat),\n/* harmony export */   useCompletion: () => (/* binding */ useCompletion)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swr */ \"(ssr)/./node_modules/swr/core/dist/index.mjs\");\n/* harmony import */ var nanoid_non_secure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanoid/non-secure */ \"(ssr)/./node_modules/ai/node_modules/nanoid/non-secure/index.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nanoid */ \"(ssr)/./node_modules/ai/node_modules/nanoid/index.js\");\n/* __next_internal_client_entry_do_not_use__ experimental_useAssistant,useChat,useCompletion auto */ // react/use-chat.ts\n\n\n// shared/utils.ts\n\n// shared/stream-parts.ts\nvar textStreamPart = {\n    code: \"0\",\n    name: \"text\",\n    parse: (value)=>{\n        if (typeof value !== \"string\") {\n            throw new Error('\"text\" parts expect a string value.');\n        }\n        return {\n            type: \"text\",\n            value\n        };\n    }\n};\nvar functionCallStreamPart = {\n    code: \"1\",\n    name: \"function_call\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"function_call\" in value) || typeof value.function_call !== \"object\" || value.function_call == null || !(\"name\" in value.function_call) || !(\"arguments\" in value.function_call) || typeof value.function_call.name !== \"string\" || typeof value.function_call.arguments !== \"string\") {\n            throw new Error('\"function_call\" parts expect an object with a \"function_call\" property.');\n        }\n        return {\n            type: \"function_call\",\n            value\n        };\n    }\n};\nvar dataStreamPart = {\n    code: \"2\",\n    name: \"data\",\n    parse: (value)=>{\n        if (!Array.isArray(value)) {\n            throw new Error('\"data\" parts expect an array value.');\n        }\n        return {\n            type: \"data\",\n            value\n        };\n    }\n};\nvar errorStreamPart = {\n    code: \"3\",\n    name: \"error\",\n    parse: (value)=>{\n        if (typeof value !== \"string\") {\n            throw new Error('\"error\" parts expect a string value.');\n        }\n        return {\n            type: \"error\",\n            value\n        };\n    }\n};\nvar assistantMessage = {\n    code: \"4\",\n    name: \"assistant_message\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"id\" in value) || !(\"role\" in value) || !(\"content\" in value) || typeof value.id !== \"string\" || typeof value.role !== \"string\" || value.role !== \"assistant\" || !Array.isArray(value.content) || !value.content.every((item)=>item != null && typeof item === \"object\" && \"type\" in item && item.type === \"text\" && \"text\" in item && item.text != null && typeof item.text === \"object\" && \"value\" in item.text && typeof item.text.value === \"string\")) {\n            throw new Error('\"assistant_message\" parts expect an object with an \"id\", \"role\", and \"content\" property.');\n        }\n        return {\n            type: \"assistant_message\",\n            value\n        };\n    }\n};\nvar assistantControlData = {\n    code: \"5\",\n    name: \"assistant_control_data\",\n    parse: (value)=>{\n        if (value == null || typeof value !== \"object\" || !(\"threadId\" in value) || !(\"messageId\" in value) || typeof value.threadId !== \"string\" || typeof value.messageId !== \"string\") {\n            throw new Error('\"assistant_control_data\" parts expect an object with a \"threadId\" and \"messageId\" property.');\n        }\n        return {\n            type: \"assistant_control_data\",\n            value: {\n                threadId: value.threadId,\n                messageId: value.messageId\n            }\n        };\n    }\n};\nvar streamParts = [\n    textStreamPart,\n    functionCallStreamPart,\n    dataStreamPart,\n    errorStreamPart,\n    assistantMessage,\n    assistantControlData\n];\nvar streamPartsByCode = {\n    [textStreamPart.code]: textStreamPart,\n    [functionCallStreamPart.code]: functionCallStreamPart,\n    [dataStreamPart.code]: dataStreamPart,\n    [errorStreamPart.code]: errorStreamPart,\n    [assistantMessage.code]: assistantMessage,\n    [assistantControlData.code]: assistantControlData\n};\nvar StreamStringPrefixes = {\n    [textStreamPart.name]: textStreamPart.code,\n    [functionCallStreamPart.name]: functionCallStreamPart.code,\n    [dataStreamPart.name]: dataStreamPart.code,\n    [errorStreamPart.name]: errorStreamPart.code,\n    [assistantMessage.name]: assistantMessage.code,\n    [assistantControlData.name]: assistantControlData.code\n};\nvar validCodes = streamParts.map((part)=>part.code);\nvar parseStreamPart = (line)=>{\n    const firstSeparatorIndex = line.indexOf(\":\");\n    if (firstSeparatorIndex === -1) {\n        throw new Error(\"Failed to parse stream string. No separator found.\");\n    }\n    const prefix = line.slice(0, firstSeparatorIndex);\n    if (!validCodes.includes(prefix)) {\n        throw new Error(`Failed to parse stream string. Invalid code ${prefix}.`);\n    }\n    const code = prefix;\n    const textValue = line.slice(firstSeparatorIndex + 1);\n    const jsonValue = JSON.parse(textValue);\n    return streamPartsByCode[code].parse(jsonValue);\n};\n// shared/utils.ts\nvar nanoid = (0,nanoid_non_secure__WEBPACK_IMPORTED_MODULE_2__.customAlphabet)(\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\", 7);\nfunction createChunkDecoder(complex) {\n    const decoder = new TextDecoder();\n    if (!complex) {\n        return function(chunk) {\n            if (!chunk) return \"\";\n            return decoder.decode(chunk, {\n                stream: true\n            });\n        };\n    }\n    return function(chunk) {\n        const decoded = decoder.decode(chunk, {\n            stream: true\n        }).split(\"\\n\").filter((line)=>line !== \"\");\n        return decoded.map(parseStreamPart).filter(Boolean);\n    };\n}\nvar COMPLEX_HEADER = \"X-Experimental-Stream-Data\";\n// shared/call-api.ts\n\n// shared/parse-complex-response.ts\nasync function parseComplexResponse({ reader, abortControllerRef, update, onFinish, generateId = nanoid, getCurrentDate = ()=>/* @__PURE__ */ new Date() }) {\n    const createdAt = getCurrentDate();\n    const decode = createChunkDecoder(true);\n    const prefixMap = {\n        data: []\n    };\n    const NEWLINE = \"\\n\".charCodeAt(0);\n    const chunks = [];\n    let totalLength = 0;\n    while(true){\n        const { value } = await reader.read();\n        if (value) {\n            chunks.push(value);\n            totalLength += value.length;\n            if (value[value.length - 1] !== NEWLINE) {\n                continue;\n            }\n        }\n        if (chunks.length === 0) {\n            break;\n        }\n        let concatenatedChunks = new Uint8Array(totalLength);\n        let offset = 0;\n        for (const chunk of chunks){\n            concatenatedChunks.set(chunk, offset);\n            offset += chunk.length;\n        }\n        chunks.length = 0;\n        totalLength = 0;\n        const lines = decode(concatenatedChunks);\n        if (typeof lines === \"string\") {\n            throw new Error(\"Invalid response format. Complex mode was set but the response is a string. This should never happen.\");\n        }\n        for (const { type, value: value2 } of lines){\n            if (type === \"text\") {\n                if (prefixMap[\"text\"]) {\n                    prefixMap[\"text\"] = {\n                        ...prefixMap[\"text\"],\n                        content: (prefixMap[\"text\"].content || \"\") + value2\n                    };\n                } else {\n                    prefixMap[\"text\"] = {\n                        id: generateId(),\n                        role: \"assistant\",\n                        content: value2,\n                        createdAt\n                    };\n                }\n            }\n            let functionCallMessage = null;\n            if (type === \"function_call\") {\n                prefixMap[\"function_call\"] = {\n                    id: generateId(),\n                    role: \"assistant\",\n                    content: \"\",\n                    function_call: value2.function_call,\n                    name: value2.function_call.name,\n                    createdAt\n                };\n                functionCallMessage = prefixMap[\"function_call\"];\n            }\n            if (type === \"data\") {\n                prefixMap[\"data\"].push(...value2);\n            }\n            const responseMessage = prefixMap[\"text\"];\n            const merged = [\n                functionCallMessage,\n                responseMessage\n            ].filter(Boolean);\n            update(merged, [\n                ...prefixMap[\"data\"]\n            ]);\n            if ((abortControllerRef == null ? void 0 : abortControllerRef.current) === null) {\n                reader.cancel();\n                break;\n            }\n        }\n    }\n    onFinish == null ? void 0 : onFinish(prefixMap);\n    return {\n        messages: [\n            prefixMap.text,\n            prefixMap.function_call\n        ].filter(Boolean),\n        data: prefixMap.data\n    };\n}\n// shared/call-api.ts\nasync function callApi({ api, messages, body, credentials, headers, abortController, appendMessage, restoreMessagesOnFailure, onResponse, onUpdate, onFinish }) {\n    var _a;\n    const response = await fetch(api, {\n        method: \"POST\",\n        body: JSON.stringify({\n            messages,\n            ...body\n        }),\n        headers,\n        signal: (_a = abortController == null ? void 0 : abortController()) == null ? void 0 : _a.signal,\n        credentials\n    }).catch((err)=>{\n        restoreMessagesOnFailure();\n        throw err;\n    });\n    if (onResponse) {\n        try {\n            await onResponse(response);\n        } catch (err) {\n            throw err;\n        }\n    }\n    if (!response.ok) {\n        restoreMessagesOnFailure();\n        throw new Error(await response.text() || \"Failed to fetch the chat response.\");\n    }\n    if (!response.body) {\n        throw new Error(\"The response body is empty.\");\n    }\n    const reader = response.body.getReader();\n    const isComplexMode = response.headers.get(COMPLEX_HEADER) === \"true\";\n    if (isComplexMode) {\n        return await parseComplexResponse({\n            reader,\n            abortControllerRef: abortController != null ? {\n                current: abortController()\n            } : void 0,\n            update: onUpdate,\n            onFinish (prefixMap) {\n                if (onFinish && prefixMap.text != null) {\n                    onFinish(prefixMap.text);\n                }\n            }\n        });\n    } else {\n        const createdAt = /* @__PURE__ */ new Date();\n        const decode = createChunkDecoder(false);\n        let streamedResponse = \"\";\n        const replyId = (0,nanoid__WEBPACK_IMPORTED_MODULE_3__.nanoid)();\n        let responseMessage = {\n            id: replyId,\n            createdAt,\n            content: \"\",\n            role: \"assistant\"\n        };\n        while(true){\n            const { done, value } = await reader.read();\n            if (done) {\n                break;\n            }\n            streamedResponse += decode(value);\n            if (streamedResponse.startsWith('{\"function_call\":')) {\n                responseMessage[\"function_call\"] = streamedResponse;\n            } else {\n                responseMessage[\"content\"] = streamedResponse;\n            }\n            appendMessage({\n                ...responseMessage\n            });\n            if ((abortController == null ? void 0 : abortController()) === null) {\n                reader.cancel();\n                break;\n            }\n        }\n        if (streamedResponse.startsWith('{\"function_call\":')) {\n            const parsedFunctionCall = JSON.parse(streamedResponse).function_call;\n            responseMessage[\"function_call\"] = parsedFunctionCall;\n            appendMessage({\n                ...responseMessage\n            });\n        }\n        if (onFinish) {\n            onFinish(responseMessage);\n        }\n        return responseMessage;\n    }\n}\n// shared/process-chat-stream.ts\nasync function processChatStream({ getStreamedResponse: getStreamedResponse2, experimental_onFunctionCall, updateChatRequest, getCurrentMessages }) {\n    while(true){\n        const messagesAndDataOrJustMessage = await getStreamedResponse2();\n        if (\"messages\" in messagesAndDataOrJustMessage) {\n            let hasFollowingResponse = false;\n            for (const message of messagesAndDataOrJustMessage.messages){\n                if (message.function_call === void 0 || typeof message.function_call === \"string\") {\n                    continue;\n                }\n                hasFollowingResponse = true;\n                if (experimental_onFunctionCall) {\n                    const functionCall = message.function_call;\n                    const functionCallResponse = await experimental_onFunctionCall(getCurrentMessages(), functionCall);\n                    if (functionCallResponse === void 0) {\n                        hasFollowingResponse = false;\n                        break;\n                    }\n                    updateChatRequest(functionCallResponse);\n                }\n            }\n            if (!hasFollowingResponse) {\n                break;\n            }\n        } else {\n            const streamedResponseMessage = messagesAndDataOrJustMessage;\n            if (streamedResponseMessage.function_call === void 0 || typeof streamedResponseMessage.function_call === \"string\") {\n                break;\n            }\n            if (experimental_onFunctionCall) {\n                const functionCall = streamedResponseMessage.function_call;\n                const functionCallResponse = await experimental_onFunctionCall(getCurrentMessages(), functionCall);\n                if (functionCallResponse === void 0) break;\n                updateChatRequest(functionCallResponse);\n            }\n        }\n    }\n}\n// react/use-chat.ts\nvar getStreamedResponse = async (api, chatRequest, mutate, mutateStreamData, existingData, extraMetadataRef, messagesRef, abortControllerRef, onFinish, onResponse, sendExtraMessageFields)=>{\n    var _a, _b;\n    const previousMessages = messagesRef.current;\n    mutate(chatRequest.messages, false);\n    const constructedMessagesPayload = sendExtraMessageFields ? chatRequest.messages : chatRequest.messages.map(({ role, content, name, function_call })=>({\n            role,\n            content,\n            ...name !== void 0 && {\n                name\n            },\n            ...function_call !== void 0 && {\n                function_call\n            }\n        }));\n    if (typeof api !== \"string\") {\n        const replyId = nanoid();\n        const createdAt = /* @__PURE__ */ new Date();\n        let responseMessage = {\n            id: replyId,\n            createdAt,\n            content: \"\",\n            role: \"assistant\"\n        };\n        async function readRow(promise) {\n            const { content, ui, next } = await promise;\n            responseMessage[\"content\"] = content;\n            responseMessage[\"ui\"] = await ui;\n            mutate([\n                ...chatRequest.messages,\n                {\n                    ...responseMessage\n                }\n            ], false);\n            if (next) {\n                await readRow(next);\n            }\n        }\n        try {\n            const promise = api({\n                messages: constructedMessagesPayload,\n                data: chatRequest.data\n            });\n            await readRow(promise);\n        } catch (e) {\n            mutate(previousMessages, false);\n            throw e;\n        }\n        if (onFinish) {\n            onFinish(responseMessage);\n        }\n        return responseMessage;\n    }\n    return await callApi({\n        api,\n        messages: constructedMessagesPayload,\n        body: {\n            data: chatRequest.data,\n            ...extraMetadataRef.current.body,\n            ...(_a = chatRequest.options) == null ? void 0 : _a.body,\n            ...chatRequest.functions !== void 0 && {\n                functions: chatRequest.functions\n            },\n            ...chatRequest.function_call !== void 0 && {\n                function_call: chatRequest.function_call\n            }\n        },\n        credentials: extraMetadataRef.current.credentials,\n        headers: {\n            ...extraMetadataRef.current.headers,\n            ...(_b = chatRequest.options) == null ? void 0 : _b.headers\n        },\n        abortController: ()=>abortControllerRef.current,\n        appendMessage (message) {\n            mutate([\n                ...chatRequest.messages,\n                message\n            ], false);\n        },\n        restoreMessagesOnFailure () {\n            mutate(previousMessages, false);\n        },\n        onResponse,\n        onUpdate (merged, data) {\n            mutate([\n                ...chatRequest.messages,\n                ...merged\n            ], false);\n            mutateStreamData([\n                ...existingData || [],\n                ...data || []\n            ], false);\n        },\n        onFinish\n    });\n};\nfunction useChat({ api = \"/api/chat\", id, initialMessages, initialInput = \"\", sendExtraMessageFields, experimental_onFunctionCall, onResponse, onFinish, onError, credentials, headers, body } = {}) {\n    const hookId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();\n    const chatId = id || hookId;\n    const [initialMessagesFallback] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const { data: messages, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        api,\n        chatId\n    ], null, {\n        fallbackData: initialMessages != null ? initialMessages : initialMessagesFallback\n    });\n    const { data: isLoading = false, mutate: mutateLoading } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatId,\n        \"loading\"\n    ], null);\n    const { data: streamData, mutate: mutateStreamData } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatId,\n        \"streamData\"\n    ], null);\n    const messagesRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(messages || []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        messagesRef.current = messages || [];\n    }, [\n        messages\n    ]);\n    const abortControllerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const extraMetadataRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        credentials,\n        headers,\n        body\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        extraMetadataRef.current = {\n            credentials,\n            headers,\n            body\n        };\n    }, [\n        credentials,\n        headers,\n        body\n    ]);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n    const triggerRequest = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (chatRequest)=>{\n        try {\n            mutateLoading(true);\n            setError(void 0);\n            const abortController = new AbortController();\n            abortControllerRef.current = abortController;\n            await processChatStream({\n                getStreamedResponse: ()=>getStreamedResponse(api, chatRequest, mutate, mutateStreamData, streamData, extraMetadataRef, messagesRef, abortControllerRef, onFinish, onResponse, sendExtraMessageFields),\n                experimental_onFunctionCall,\n                updateChatRequest: (chatRequestParam)=>{\n                    chatRequest = chatRequestParam;\n                },\n                getCurrentMessages: ()=>messagesRef.current\n            });\n            abortControllerRef.current = null;\n        } catch (err) {\n            if (err.name === \"AbortError\") {\n                abortControllerRef.current = null;\n                return null;\n            }\n            if (onError && err instanceof Error) {\n                onError(err);\n            }\n            setError(err);\n        } finally{\n            mutateLoading(false);\n        }\n    }, [\n        mutate,\n        mutateLoading,\n        api,\n        extraMetadataRef,\n        onResponse,\n        onFinish,\n        onError,\n        setError,\n        mutateStreamData,\n        streamData,\n        sendExtraMessageFields,\n        experimental_onFunctionCall,\n        messagesRef.current,\n        abortControllerRef.current\n    ]);\n    const append = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (message, { options, functions, function_call, data } = {})=>{\n        if (!message.id) {\n            message.id = nanoid();\n        }\n        const chatRequest = {\n            messages: messagesRef.current.concat(message),\n            options,\n            data,\n            ...functions !== void 0 && {\n                functions\n            },\n            ...function_call !== void 0 && {\n                function_call\n            }\n        };\n        return triggerRequest(chatRequest);\n    }, [\n        triggerRequest\n    ]);\n    const reload = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ({ options, functions, function_call } = {})=>{\n        if (messagesRef.current.length === 0) return null;\n        const lastMessage = messagesRef.current[messagesRef.current.length - 1];\n        if (lastMessage.role === \"assistant\") {\n            const chatRequest2 = {\n                messages: messagesRef.current.slice(0, -1),\n                options,\n                ...functions !== void 0 && {\n                    functions\n                },\n                ...function_call !== void 0 && {\n                    function_call\n                }\n            };\n            return triggerRequest(chatRequest2);\n        }\n        const chatRequest = {\n            messages: messagesRef.current,\n            options,\n            ...functions !== void 0 && {\n                functions\n            },\n            ...function_call !== void 0 && {\n                function_call\n            }\n        };\n        return triggerRequest(chatRequest);\n    }, [\n        triggerRequest\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort();\n            abortControllerRef.current = null;\n        }\n    }, []);\n    const setMessages = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((messages2)=>{\n        mutate(messages2, false);\n        messagesRef.current = messages2;\n    }, [\n        mutate\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialInput);\n    const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, options = {}, metadata)=>{\n        if (metadata) {\n            extraMetadataRef.current = {\n                ...extraMetadataRef.current,\n                ...metadata\n            };\n        }\n        e.preventDefault();\n        if (!input) return;\n        append({\n            content: input,\n            role: \"user\",\n            createdAt: /* @__PURE__ */ new Date()\n        }, options);\n        setInput(\"\");\n    }, [\n        input,\n        append\n    ]);\n    const handleInputChange = (e)=>{\n        setInput(e.target.value);\n    };\n    return {\n        messages: messages || [],\n        error,\n        append,\n        reload,\n        stop,\n        setMessages,\n        input,\n        setInput,\n        handleInputChange,\n        handleSubmit,\n        isLoading,\n        data: streamData\n    };\n}\n// react/use-completion.ts\n\n\nfunction useCompletion({ api = \"/api/completion\", id, initialCompletion = \"\", initialInput = \"\", credentials, headers, body, onResponse, onFinish, onError } = {}) {\n    const hookId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();\n    const completionId = id || hookId;\n    const { data, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        api,\n        completionId\n    ], null, {\n        fallbackData: initialCompletion\n    });\n    const { data: isLoading = false, mutate: mutateLoading } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        completionId,\n        \"loading\"\n    ], null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n    const completion = data;\n    const [abortController, setAbortController] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const extraMetadataRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        credentials,\n        headers,\n        body\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        extraMetadataRef.current = {\n            credentials,\n            headers,\n            body\n        };\n    }, [\n        credentials,\n        headers,\n        body\n    ]);\n    const triggerRequest = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (prompt, options)=>{\n        try {\n            mutateLoading(true);\n            setError(void 0);\n            const abortController2 = new AbortController();\n            setAbortController(abortController2);\n            mutate(\"\", false);\n            const res = await fetch(api, {\n                method: \"POST\",\n                body: JSON.stringify({\n                    prompt,\n                    ...extraMetadataRef.current.body,\n                    ...options == null ? void 0 : options.body\n                }),\n                credentials: extraMetadataRef.current.credentials,\n                headers: {\n                    ...extraMetadataRef.current.headers,\n                    ...options == null ? void 0 : options.headers\n                },\n                signal: abortController2.signal\n            }).catch((err)=>{\n                throw err;\n            });\n            if (onResponse) {\n                try {\n                    await onResponse(res);\n                } catch (err) {\n                    throw err;\n                }\n            }\n            if (!res.ok) {\n                throw new Error(await res.text() || \"Failed to fetch the chat response.\");\n            }\n            if (!res.body) {\n                throw new Error(\"The response body is empty.\");\n            }\n            let result = \"\";\n            const reader = res.body.getReader();\n            const decoder = createChunkDecoder();\n            while(true){\n                const { done, value } = await reader.read();\n                if (done) {\n                    break;\n                }\n                result += decoder(value);\n                mutate(result, false);\n                if (abortController2 === null) {\n                    reader.cancel();\n                    break;\n                }\n            }\n            if (onFinish) {\n                onFinish(prompt, result);\n            }\n            setAbortController(null);\n            return result;\n        } catch (err) {\n            if (err.name === \"AbortError\") {\n                setAbortController(null);\n                return null;\n            }\n            if (err instanceof Error) {\n                if (onError) {\n                    onError(err);\n                }\n            }\n            setError(err);\n        } finally{\n            mutateLoading(false);\n        }\n    }, [\n        mutate,\n        mutateLoading,\n        api,\n        extraMetadataRef,\n        setAbortController,\n        onResponse,\n        onFinish,\n        onError,\n        setError\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (abortController) {\n            abortController.abort();\n            setAbortController(null);\n        }\n    }, [\n        abortController\n    ]);\n    const setCompletion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((completion2)=>{\n        mutate(completion2, false);\n    }, [\n        mutate\n    ]);\n    const complete = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (prompt, options)=>{\n        return triggerRequest(prompt, options);\n    }, [\n        triggerRequest\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialInput);\n    const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\n        e.preventDefault();\n        if (!input) return;\n        return complete(input);\n    }, [\n        input,\n        complete\n    ]);\n    const handleInputChange = (e)=>{\n        setInput(e.target.value);\n    };\n    return {\n        completion,\n        complete,\n        error,\n        setCompletion,\n        stop,\n        input,\n        setInput,\n        handleInputChange,\n        handleSubmit,\n        isLoading\n    };\n}\n// react/use-assistant.ts\n\n// shared/process-message-stream.ts\nasync function processMessageStream(reader, processMessage) {\n    const decoder = new TextDecoder();\n    let buffer = \"\";\n    while(true){\n        const { done, value } = await reader.read();\n        if (done) {\n            if (buffer.length > 0) {\n                processMessage(buffer);\n            }\n            break;\n        }\n        buffer += decoder.decode(value, {\n            stream: true\n        });\n        let endIndex;\n        while((endIndex = buffer.indexOf(\"\\n\")) !== -1){\n            processMessage(buffer.substring(0, endIndex).trim());\n            buffer = buffer.substring(endIndex + 1);\n        }\n    }\n}\n// react/use-assistant.ts\nfunction experimental_useAssistant({ api, threadId: threadIdParam }) {\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\");\n    const [threadId, setThreadId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"awaiting_message\");\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n    const handleInputChange = (e)=>{\n        setInput(e.target.value);\n    };\n    const submitMessage = async (e)=>{\n        var _a;\n        e.preventDefault();\n        if (input === \"\") {\n            return;\n        }\n        setStatus(\"in_progress\");\n        setMessages((messages2)=>[\n                ...messages2,\n                {\n                    id: \"\",\n                    role: \"user\",\n                    content: input\n                }\n            ]);\n        setInput(\"\");\n        const result = await fetch(api, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                // always use user-provided threadId when available:\n                threadId: (_a = threadIdParam != null ? threadIdParam : threadId) != null ? _a : null,\n                message: input\n            })\n        });\n        if (result.body == null) {\n            throw new Error(\"The response body is empty.\");\n        }\n        await processMessageStream(result.body.getReader(), (message)=>{\n            try {\n                const { type, value } = parseStreamPart(message);\n                switch(type){\n                    case \"assistant_message\":\n                        {\n                            setMessages((messages2)=>[\n                                    ...messages2,\n                                    {\n                                        id: value.id,\n                                        role: value.role,\n                                        content: value.content[0].text.value\n                                    }\n                                ]);\n                            break;\n                        }\n                    case \"assistant_control_data\":\n                        {\n                            setThreadId(value.threadId);\n                            setMessages((messages2)=>{\n                                const lastMessage = messages2[messages2.length - 1];\n                                lastMessage.id = value.messageId;\n                                return [\n                                    ...messages2.slice(0, messages2.length - 1),\n                                    lastMessage\n                                ];\n                            });\n                            break;\n                        }\n                    case \"error\":\n                        {\n                            setError(value);\n                            break;\n                        }\n                }\n            } catch (error2) {\n                setError(error2);\n            }\n        });\n        setStatus(\"awaiting_message\");\n    };\n    return {\n        messages,\n        threadId,\n        input,\n        handleInputChange,\n        submitMessage,\n        status,\n        error\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWkvcmVhY3QvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztxR0FFQSxvQkFBb0I7QUFDb0Q7QUFDL0M7QUFFekIsa0JBQWtCO0FBQ2lDO0FBRW5ELHlCQUF5QjtBQUN6QixJQUFJTyxpQkFBaUI7SUFDbkJDLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxPQUFPLENBQUNDO1FBQ04sSUFBSSxPQUFPQSxVQUFVLFVBQVU7WUFDN0IsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBQ0EsT0FBTztZQUFFQyxNQUFNO1lBQVFGO1FBQU07SUFDL0I7QUFDRjtBQUNBLElBQUlHLHlCQUF5QjtJQUMzQk4sTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE9BQU8sQ0FBQ0M7UUFDTixJQUFJQSxTQUFTLFFBQVEsT0FBT0EsVUFBVSxZQUFZLENBQUUsb0JBQW1CQSxLQUFJLEtBQU0sT0FBT0EsTUFBTUksYUFBYSxLQUFLLFlBQVlKLE1BQU1JLGFBQWEsSUFBSSxRQUFRLENBQUUsV0FBVUosTUFBTUksYUFBYSxLQUFLLENBQUUsZ0JBQWVKLE1BQU1JLGFBQWEsS0FBSyxPQUFPSixNQUFNSSxhQUFhLENBQUNOLElBQUksS0FBSyxZQUFZLE9BQU9FLE1BQU1JLGFBQWEsQ0FBQ0MsU0FBUyxLQUFLLFVBQVU7WUFDelUsTUFBTSxJQUFJSixNQUNSO1FBRUo7UUFDQSxPQUFPO1lBQ0xDLE1BQU07WUFDTkY7UUFDRjtJQUNGO0FBQ0Y7QUFDQSxJQUFJTSxpQkFBaUI7SUFDbkJULE1BQU07SUFDTkMsTUFBTTtJQUNOQyxPQUFPLENBQUNDO1FBQ04sSUFBSSxDQUFDTyxNQUFNQyxPQUFPLENBQUNSLFFBQVE7WUFDekIsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBQ0EsT0FBTztZQUFFQyxNQUFNO1lBQVFGO1FBQU07SUFDL0I7QUFDRjtBQUNBLElBQUlTLGtCQUFrQjtJQUNwQlosTUFBTTtJQUNOQyxNQUFNO0lBQ05DLE9BQU8sQ0FBQ0M7UUFDTixJ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QVk7NEJBQ25FOzRCQUNBO3dCQUNGO29CQUNBLEtBQUs7d0JBQVM7NEJBQ1pQLFNBQVNwSjs0QkFDVDt3QkFDRjtnQkFDRjtZQUNGLEVBQUUsT0FBT3VNLFFBQVE7Z0JBQ2ZuRCxTQUFTbUQ7WUFDWDtRQUNGO1FBQ0FGLFVBQVU7SUFDWjtJQUNBLE9BQU87UUFDTHRIO1FBQ0E3RDtRQUNBK0k7UUFDQUs7UUFDQWdDO1FBQ0FGO1FBQ0FqRDtJQUNGO0FBQ0Y7QUFLRSIsInNvdXJjZXMiOlsid2VicGFjazovL29wZW5haS10ZXN0LTEvLi9ub2RlX21vZHVsZXMvYWkvcmVhY3QvZGlzdC9pbmRleC5tanM/MmJmYSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuLy8gcmVhY3QvdXNlLWNoYXQudHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZUlkLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdXNlU1dSIGZyb20gXCJzd3JcIjtcblxuLy8gc2hhcmVkL3V0aWxzLnRzXG5pbXBvcnQgeyBjdXN0b21BbHBoYWJldCB9IGZyb20gXCJuYW5vaWQvbm9uLXNlY3VyZVwiO1xuXG4vLyBzaGFyZWQvc3RyZWFtLXBhcnRzLnRzXG52YXIgdGV4dFN0cmVhbVBhcnQgPSB7XG4gIGNvZGU6IFwiMFwiLFxuICBuYW1lOiBcInRleHRcIixcbiAgcGFyc2U6ICh2YWx1ZSkgPT4ge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignXCJ0ZXh0XCIgcGFydHMgZXhwZWN0IGEgc3RyaW5nIHZhbHVlLicpO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBcInRleHRcIiwgdmFsdWUgfTtcbiAgfVxufTtcbnZhciBmdW5jdGlvbkNhbGxTdHJlYW1QYXJ0ID0ge1xuICBjb2RlOiBcIjFcIixcbiAgbmFtZTogXCJmdW5jdGlvbl9jYWxsXCIsXG4gIHBhcnNlOiAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgIShcImZ1bmN0aW9uX2NhbGxcIiBpbiB2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlLmZ1bmN0aW9uX2NhbGwgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUuZnVuY3Rpb25fY2FsbCA9PSBudWxsIHx8ICEoXCJuYW1lXCIgaW4gdmFsdWUuZnVuY3Rpb25fY2FsbCkgfHwgIShcImFyZ3VtZW50c1wiIGluIHZhbHVlLmZ1bmN0aW9uX2NhbGwpIHx8IHR5cGVvZiB2YWx1ZS5mdW5jdGlvbl9jYWxsLm5hbWUgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlLmZ1bmN0aW9uX2NhbGwuYXJndW1lbnRzICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdcImZ1bmN0aW9uX2NhbGxcIiBwYXJ0cyBleHBlY3QgYW4gb2JqZWN0IHdpdGggYSBcImZ1bmN0aW9uX2NhbGxcIiBwcm9wZXJ0eS4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJmdW5jdGlvbl9jYWxsXCIsXG4gICAgICB2YWx1ZVxuICAgIH07XG4gIH1cbn07XG52YXIgZGF0YVN0cmVhbVBhcnQgPSB7XG4gIGNvZGU6IFwiMlwiLFxuICBuYW1lOiBcImRhdGFcIixcbiAgcGFyc2U6ICh2YWx1ZSkgPT4ge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignXCJkYXRhXCIgcGFydHMgZXhwZWN0IGFuIGFycmF5IHZhbHVlLicpO1xuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiBcImRhdGFcIiwgdmFsdWUgfTtcbiAgfVxufTtcbnZhciBlcnJvclN0cmVhbVBhcnQgPSB7XG4gIGNvZGU6IFwiM1wiLFxuICBuYW1lOiBcImVycm9yXCIsXG4gIHBhcnNlOiAodmFsdWUpID0+IHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1wiZXJyb3JcIiBwYXJ0cyBleHBlY3QgYSBzdHJpbmcgdmFsdWUuJyk7XG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6IFwiZXJyb3JcIiwgdmFsdWUgfTtcbiAgfVxufTtcbnZhciBhc3Npc3RhbnRNZXNzYWdlID0ge1xuICBjb2RlOiBcIjRcIixcbiAgbmFtZTogXCJhc3Npc3RhbnRfbWVzc2FnZVwiLFxuICBwYXJzZTogKHZhbHVlKSA9PiB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgfHwgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiIHx8ICEoXCJpZFwiIGluIHZhbHVlKSB8fCAhKFwicm9sZVwiIGluIHZhbHVlKSB8fCAhKFwiY29udGVudFwiIGluIHZhbHVlKSB8fCB0eXBlb2YgdmFsdWUuaWQgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlLnJvbGUgIT09IFwic3RyaW5nXCIgfHwgdmFsdWUucm9sZSAhPT0gXCJhc3Npc3RhbnRcIiB8fCAhQXJyYXkuaXNBcnJheSh2YWx1ZS5jb250ZW50KSB8fCAhdmFsdWUuY29udGVudC5ldmVyeShcbiAgICAgIChpdGVtKSA9PiBpdGVtICE9IG51bGwgJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgXCJ0eXBlXCIgaW4gaXRlbSAmJiBpdGVtLnR5cGUgPT09IFwidGV4dFwiICYmIFwidGV4dFwiIGluIGl0ZW0gJiYgaXRlbS50ZXh0ICE9IG51bGwgJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gaXRlbS50ZXh0ICYmIHR5cGVvZiBpdGVtLnRleHQudmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICApKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdcImFzc2lzdGFudF9tZXNzYWdlXCIgcGFydHMgZXhwZWN0IGFuIG9iamVjdCB3aXRoIGFuIFwiaWRcIiwgXCJyb2xlXCIsIGFuZCBcImNvbnRlbnRcIiBwcm9wZXJ0eS4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJhc3Npc3RhbnRfbWVzc2FnZVwiLFxuICAgICAgdmFsdWVcbiAgICB9O1xuICB9XG59O1xudmFyIGFzc2lzdGFudENvbnRyb2xEYXRhID0ge1xuICBjb2RlOiBcIjVcIixcbiAgbmFtZTogXCJhc3Npc3RhbnRfY29udHJvbF9kYXRhXCIsXG4gIHBhcnNlOiAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgIShcInRocmVhZElkXCIgaW4gdmFsdWUpIHx8ICEoXCJtZXNzYWdlSWRcIiBpbiB2YWx1ZSkgfHwgdHlwZW9mIHZhbHVlLnRocmVhZElkICE9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWx1ZS5tZXNzYWdlSWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1wiYXNzaXN0YW50X2NvbnRyb2xfZGF0YVwiIHBhcnRzIGV4cGVjdCBhbiBvYmplY3Qgd2l0aCBhIFwidGhyZWFkSWRcIiBhbmQgXCJtZXNzYWdlSWRcIiBwcm9wZXJ0eS4nXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJhc3Npc3RhbnRfY29udHJvbF9kYXRhXCIsXG4gICAgICB2YWx1ZToge1xuICAgICAgICB0aHJlYWRJZDogdmFsdWUudGhyZWFkSWQsXG4gICAgICAgIG1lc3NhZ2VJZDogdmFsdWUubWVzc2FnZUlkXG4gICAgICB9XG4gICAgfTtcbiAgfVxufTtcbnZhciBzdHJlYW1QYXJ0cyA9IFtcbiAgdGV4dFN0cmVhbVBhcnQsXG4gIGZ1bmN0aW9uQ2FsbFN0cmVhbVBhcnQsXG4gIGRhdGFTdHJlYW1QYXJ0LFxuICBlcnJvclN0cmVhbVBhcnQsXG4gIGFzc2lzdGFudE1lc3NhZ2UsXG4gIGFzc2lzdGFudENvbnRyb2xEYXRhXG5dO1xudmFyIHN0cmVhbVBhcnRzQnlDb2RlID0ge1xuICBbdGV4dFN0cmVhbVBhcnQuY29kZV06IHRleHRTdHJlYW1QYXJ0LFxuICBbZnVuY3Rpb25DYWxsU3RyZWFtUGFydC5jb2RlXTogZnVuY3Rpb25DYWxsU3RyZWFtUGFydCxcbiAgW2RhdGFTdHJlYW1QYXJ0LmNvZGVdOiBkYXRhU3RyZWFtUGFydCxcbiAgW2Vycm9yU3RyZWFtUGFydC5jb2RlXTogZXJyb3JTdHJlYW1QYXJ0LFxuICBbYXNzaXN0YW50TWVzc2FnZS5jb2RlXTogYXNzaXN0YW50TWVzc2FnZSxcbiAgW2Fzc2lzdGFudENvbnRyb2xEYXRhLmNvZGVdOiBhc3Npc3RhbnRDb250cm9sRGF0YVxufTtcbnZhciBTdHJlYW1TdHJpbmdQcmVmaXhlcyA9IHtcbiAgW3RleHRTdHJlYW1QYXJ0Lm5hbWVdOiB0ZXh0U3RyZWFtUGFydC5jb2RlLFxuICBbZnVuY3Rpb25DYWxsU3RyZWFtUGFydC5uYW1lXTogZnVuY3Rpb25DYWxsU3RyZWFtUGFydC5jb2RlLFxuICBbZGF0YVN0cmVhbVBhcnQubmFtZV06IGRhdGFTdHJlYW1QYXJ0LmNvZGUsXG4gIFtlcnJvclN0cmVhbVBhcnQubmFtZV06IGVycm9yU3RyZWFtUGFydC5jb2RlLFxuICBbYXNzaXN0YW50TWVzc2FnZS5uYW1lXTogYXNzaXN0YW50TWVzc2FnZS5jb2RlLFxuICBbYXNzaXN0YW50Q29udHJvbERhdGEubmFtZV06IGFzc2lzdGFudENvbnRyb2xEYXRhLmNvZGVcbn07XG52YXIgdmFsaWRDb2RlcyA9IHN0cmVhbVBhcnRzLm1hcCgocGFydCkgPT4gcGFydC5jb2RlKTtcbnZhciBwYXJzZVN0cmVhbVBhcnQgPSAobGluZSkgPT4ge1xuICBjb25zdCBmaXJzdFNlcGFyYXRvckluZGV4ID0gbGluZS5pbmRleE9mKFwiOlwiKTtcbiAgaWYgKGZpcnN0U2VwYXJhdG9ySW5kZXggPT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHN0cmVhbSBzdHJpbmcuIE5vIHNlcGFyYXRvciBmb3VuZC5cIik7XG4gIH1cbiAgY29uc3QgcHJlZml4ID0gbGluZS5zbGljZSgwLCBmaXJzdFNlcGFyYXRvckluZGV4KTtcbiAgaWYgKCF2YWxpZENvZGVzLmluY2x1ZGVzKHByZWZpeCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBzdHJlYW0gc3RyaW5nLiBJbnZhbGlkIGNvZGUgJHtwcmVmaXh9LmApO1xuICB9XG4gIGNvbnN0IGNvZGUgPSBwcmVmaXg7XG4gIGNvbnN0IHRleHRWYWx1ZSA9IGxpbmUuc2xpY2UoZmlyc3RTZXBhcmF0b3JJbmRleCArIDEpO1xuICBjb25zdCBqc29uVmFsdWUgPSBKU09OLnBhcnNlKHRleHRWYWx1ZSk7XG4gIHJldHVybiBzdHJlYW1QYXJ0c0J5Q29kZVtjb2RlXS5wYXJzZShqc29uVmFsdWUpO1xufTtcblxuLy8gc2hhcmVkL3V0aWxzLnRzXG52YXIgbmFub2lkID0gY3VzdG9tQWxwaGFiZXQoXG4gIFwiMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIixcbiAgN1xuKTtcbmZ1bmN0aW9uIGNyZWF0ZUNodW5rRGVjb2Rlcihjb21wbGV4KSB7XG4gIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgaWYgKCFjb21wbGV4KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgICBpZiAoIWNodW5rKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShjaHVuaywgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24oY2h1bmspIHtcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2Rlci5kZWNvZGUoY2h1bmssIHsgc3RyZWFtOiB0cnVlIH0pLnNwbGl0KFwiXFxuXCIpLmZpbHRlcigobGluZSkgPT4gbGluZSAhPT0gXCJcIik7XG4gICAgcmV0dXJuIGRlY29kZWQubWFwKHBhcnNlU3RyZWFtUGFydCkuZmlsdGVyKEJvb2xlYW4pO1xuICB9O1xufVxudmFyIENPTVBMRVhfSEVBREVSID0gXCJYLUV4cGVyaW1lbnRhbC1TdHJlYW0tRGF0YVwiO1xuXG4vLyBzaGFyZWQvY2FsbC1hcGkudHNcbmltcG9ydCB7IG5hbm9pZCBhcyBuYW5vaWQyIH0gZnJvbSBcIm5hbm9pZFwiO1xuXG4vLyBzaGFyZWQvcGFyc2UtY29tcGxleC1yZXNwb25zZS50c1xuYXN5bmMgZnVuY3Rpb24gcGFyc2VDb21wbGV4UmVzcG9uc2Uoe1xuICByZWFkZXIsXG4gIGFib3J0Q29udHJvbGxlclJlZixcbiAgdXBkYXRlLFxuICBvbkZpbmlzaCxcbiAgZ2VuZXJhdGVJZCA9IG5hbm9pZCxcbiAgZ2V0Q3VycmVudERhdGUgPSAoKSA9PiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxufSkge1xuICBjb25zdCBjcmVhdGVkQXQgPSBnZXRDdXJyZW50RGF0ZSgpO1xuICBjb25zdCBkZWNvZGUgPSBjcmVhdGVDaHVua0RlY29kZXIodHJ1ZSk7XG4gIGNvbnN0IHByZWZpeE1hcCA9IHtcbiAgICBkYXRhOiBbXVxuICB9O1xuICBjb25zdCBORVdMSU5FID0gXCJcXG5cIi5jaGFyQ29kZUF0KDApO1xuICBjb25zdCBjaHVua3MgPSBbXTtcbiAgbGV0IHRvdGFsTGVuZ3RoID0gMDtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCB7IHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgY2h1bmtzLnB1c2godmFsdWUpO1xuICAgICAgdG90YWxMZW5ndGggKz0gdmFsdWUubGVuZ3RoO1xuICAgICAgaWYgKHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdICE9PSBORVdMSU5FKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGxldCBjb25jYXRlbmF0ZWRDaHVua3MgPSBuZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgIGNvbmNhdGVuYXRlZENodW5rcy5zZXQoY2h1bmssIG9mZnNldCk7XG4gICAgICBvZmZzZXQgKz0gY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgICBjaHVua3MubGVuZ3RoID0gMDtcbiAgICB0b3RhbExlbmd0aCA9IDA7XG4gICAgY29uc3QgbGluZXMgPSBkZWNvZGUoY29uY2F0ZW5hdGVkQ2h1bmtzKTtcbiAgICBpZiAodHlwZW9mIGxpbmVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiSW52YWxpZCByZXNwb25zZSBmb3JtYXQuIENvbXBsZXggbW9kZSB3YXMgc2V0IGJ1dCB0aGUgcmVzcG9uc2UgaXMgYSBzdHJpbmcuIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbi5cIlxuICAgICAgKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCB7IHR5cGUsIHZhbHVlOiB2YWx1ZTIgfSBvZiBsaW5lcykge1xuICAgICAgaWYgKHR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgIGlmIChwcmVmaXhNYXBbXCJ0ZXh0XCJdKSB7XG4gICAgICAgICAgcHJlZml4TWFwW1widGV4dFwiXSA9IHtcbiAgICAgICAgICAgIC4uLnByZWZpeE1hcFtcInRleHRcIl0sXG4gICAgICAgICAgICBjb250ZW50OiAocHJlZml4TWFwW1widGV4dFwiXS5jb250ZW50IHx8IFwiXCIpICsgdmFsdWUyXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcmVmaXhNYXBbXCJ0ZXh0XCJdID0ge1xuICAgICAgICAgICAgaWQ6IGdlbmVyYXRlSWQoKSxcbiAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICBjb250ZW50OiB2YWx1ZTIsXG4gICAgICAgICAgICBjcmVhdGVkQXRcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgZnVuY3Rpb25DYWxsTWVzc2FnZSA9IG51bGw7XG4gICAgICBpZiAodHlwZSA9PT0gXCJmdW5jdGlvbl9jYWxsXCIpIHtcbiAgICAgICAgcHJlZml4TWFwW1wiZnVuY3Rpb25fY2FsbFwiXSA9IHtcbiAgICAgICAgICBpZDogZ2VuZXJhdGVJZCgpLFxuICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgY29udGVudDogXCJcIixcbiAgICAgICAgICBmdW5jdGlvbl9jYWxsOiB2YWx1ZTIuZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgICBuYW1lOiB2YWx1ZTIuZnVuY3Rpb25fY2FsbC5uYW1lLFxuICAgICAgICAgIGNyZWF0ZWRBdFxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbkNhbGxNZXNzYWdlID0gcHJlZml4TWFwW1wiZnVuY3Rpb25fY2FsbFwiXTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlID09PSBcImRhdGFcIikge1xuICAgICAgICBwcmVmaXhNYXBbXCJkYXRhXCJdLnB1c2goLi4udmFsdWUyKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3BvbnNlTWVzc2FnZSA9IHByZWZpeE1hcFtcInRleHRcIl07XG4gICAgICBjb25zdCBtZXJnZWQgPSBbZnVuY3Rpb25DYWxsTWVzc2FnZSwgcmVzcG9uc2VNZXNzYWdlXS5maWx0ZXIoXG4gICAgICAgIEJvb2xlYW5cbiAgICAgICk7XG4gICAgICB1cGRhdGUobWVyZ2VkLCBbLi4ucHJlZml4TWFwW1wiZGF0YVwiXV0pO1xuICAgICAgaWYgKChhYm9ydENvbnRyb2xsZXJSZWYgPT0gbnVsbCA/IHZvaWQgMCA6IGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50KSA9PT0gbnVsbCkge1xuICAgICAgICByZWFkZXIuY2FuY2VsKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBvbkZpbmlzaCA9PSBudWxsID8gdm9pZCAwIDogb25GaW5pc2gocHJlZml4TWFwKTtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlczogW3ByZWZpeE1hcC50ZXh0LCBwcmVmaXhNYXAuZnVuY3Rpb25fY2FsbF0uZmlsdGVyKFxuICAgICAgQm9vbGVhblxuICAgICksXG4gICAgZGF0YTogcHJlZml4TWFwLmRhdGFcbiAgfTtcbn1cblxuLy8gc2hhcmVkL2NhbGwtYXBpLnRzXG5hc3luYyBmdW5jdGlvbiBjYWxsQXBpKHtcbiAgYXBpLFxuICBtZXNzYWdlcyxcbiAgYm9keSxcbiAgY3JlZGVudGlhbHMsXG4gIGhlYWRlcnMsXG4gIGFib3J0Q29udHJvbGxlcixcbiAgYXBwZW5kTWVzc2FnZSxcbiAgcmVzdG9yZU1lc3NhZ2VzT25GYWlsdXJlLFxuICBvblJlc3BvbnNlLFxuICBvblVwZGF0ZSxcbiAgb25GaW5pc2hcbn0pIHtcbiAgdmFyIF9hO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaSwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbWVzc2FnZXMsXG4gICAgICAuLi5ib2R5XG4gICAgfSksXG4gICAgaGVhZGVycyxcbiAgICBzaWduYWw6IChfYSA9IGFib3J0Q29udHJvbGxlciA9PSBudWxsID8gdm9pZCAwIDogYWJvcnRDb250cm9sbGVyKCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5zaWduYWwsXG4gICAgY3JlZGVudGlhbHNcbiAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIHJlc3RvcmVNZXNzYWdlc09uRmFpbHVyZSgpO1xuICAgIHRocm93IGVycjtcbiAgfSk7XG4gIGlmIChvblJlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IG9uUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgcmVzdG9yZU1lc3NhZ2VzT25GYWlsdXJlKCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYXdhaXQgcmVzcG9uc2UudGV4dCgpIHx8IFwiRmFpbGVkIHRvIGZldGNoIHRoZSBjaGF0IHJlc3BvbnNlLlwiXG4gICAgKTtcbiAgfVxuICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVzcG9uc2UgYm9keSBpcyBlbXB0eS5cIik7XG4gIH1cbiAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKTtcbiAgY29uc3QgaXNDb21wbGV4TW9kZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KENPTVBMRVhfSEVBREVSKSA9PT0gXCJ0cnVlXCI7XG4gIGlmIChpc0NvbXBsZXhNb2RlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHBhcnNlQ29tcGxleFJlc3BvbnNlKHtcbiAgICAgIHJlYWRlcixcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZjogYWJvcnRDb250cm9sbGVyICE9IG51bGwgPyB7IGN1cnJlbnQ6IGFib3J0Q29udHJvbGxlcigpIH0gOiB2b2lkIDAsXG4gICAgICB1cGRhdGU6IG9uVXBkYXRlLFxuICAgICAgb25GaW5pc2gocHJlZml4TWFwKSB7XG4gICAgICAgIGlmIChvbkZpbmlzaCAmJiBwcmVmaXhNYXAudGV4dCAhPSBudWxsKSB7XG4gICAgICAgICAgb25GaW5pc2gocHJlZml4TWFwLnRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY3JlYXRlZEF0ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGVjb2RlID0gY3JlYXRlQ2h1bmtEZWNvZGVyKGZhbHNlKTtcbiAgICBsZXQgc3RyZWFtZWRSZXNwb25zZSA9IFwiXCI7XG4gICAgY29uc3QgcmVwbHlJZCA9IG5hbm9pZDIoKTtcbiAgICBsZXQgcmVzcG9uc2VNZXNzYWdlID0ge1xuICAgICAgaWQ6IHJlcGx5SWQsXG4gICAgICBjcmVhdGVkQXQsXG4gICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIlxuICAgIH07XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0cmVhbWVkUmVzcG9uc2UgKz0gZGVjb2RlKHZhbHVlKTtcbiAgICAgIGlmIChzdHJlYW1lZFJlc3BvbnNlLnN0YXJ0c1dpdGgoJ3tcImZ1bmN0aW9uX2NhbGxcIjonKSkge1xuICAgICAgICByZXNwb25zZU1lc3NhZ2VbXCJmdW5jdGlvbl9jYWxsXCJdID0gc3RyZWFtZWRSZXNwb25zZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3BvbnNlTWVzc2FnZVtcImNvbnRlbnRcIl0gPSBzdHJlYW1lZFJlc3BvbnNlO1xuICAgICAgfVxuICAgICAgYXBwZW5kTWVzc2FnZSh7IC4uLnJlc3BvbnNlTWVzc2FnZSB9KTtcbiAgICAgIGlmICgoYWJvcnRDb250cm9sbGVyID09IG51bGwgPyB2b2lkIDAgOiBhYm9ydENvbnRyb2xsZXIoKSkgPT09IG51bGwpIHtcbiAgICAgICAgcmVhZGVyLmNhbmNlbCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0cmVhbWVkUmVzcG9uc2Uuc3RhcnRzV2l0aCgne1wiZnVuY3Rpb25fY2FsbFwiOicpKSB7XG4gICAgICBjb25zdCBwYXJzZWRGdW5jdGlvbkNhbGwgPSBKU09OLnBhcnNlKHN0cmVhbWVkUmVzcG9uc2UpLmZ1bmN0aW9uX2NhbGw7XG4gICAgICByZXNwb25zZU1lc3NhZ2VbXCJmdW5jdGlvbl9jYWxsXCJdID0gcGFyc2VkRnVuY3Rpb25DYWxsO1xuICAgICAgYXBwZW5kTWVzc2FnZSh7IC4uLnJlc3BvbnNlTWVzc2FnZSB9KTtcbiAgICB9XG4gICAgaWYgKG9uRmluaXNoKSB7XG4gICAgICBvbkZpbmlzaChyZXNwb25zZU1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2VNZXNzYWdlO1xuICB9XG59XG5cbi8vIHNoYXJlZC9wcm9jZXNzLWNoYXQtc3RyZWFtLnRzXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzQ2hhdFN0cmVhbSh7XG4gIGdldFN0cmVhbWVkUmVzcG9uc2U6IGdldFN0cmVhbWVkUmVzcG9uc2UyLFxuICBleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwsXG4gIHVwZGF0ZUNoYXRSZXF1ZXN0LFxuICBnZXRDdXJyZW50TWVzc2FnZXNcbn0pIHtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBjb25zdCBtZXNzYWdlc0FuZERhdGFPckp1c3RNZXNzYWdlID0gYXdhaXQgZ2V0U3RyZWFtZWRSZXNwb25zZTIoKTtcbiAgICBpZiAoXCJtZXNzYWdlc1wiIGluIG1lc3NhZ2VzQW5kRGF0YU9ySnVzdE1lc3NhZ2UpIHtcbiAgICAgIGxldCBoYXNGb2xsb3dpbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzQW5kRGF0YU9ySnVzdE1lc3NhZ2UubWVzc2FnZXMpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UuZnVuY3Rpb25fY2FsbCA9PT0gdm9pZCAwIHx8IHR5cGVvZiBtZXNzYWdlLmZ1bmN0aW9uX2NhbGwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBoYXNGb2xsb3dpbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgIGlmIChleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwpIHtcbiAgICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGwgPSBtZXNzYWdlLmZ1bmN0aW9uX2NhbGw7XG4gICAgICAgICAgY29uc3QgZnVuY3Rpb25DYWxsUmVzcG9uc2UgPSBhd2FpdCBleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwoXG4gICAgICAgICAgICBnZXRDdXJyZW50TWVzc2FnZXMoKSxcbiAgICAgICAgICAgIGZ1bmN0aW9uQ2FsbFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGZ1bmN0aW9uQ2FsbFJlc3BvbnNlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGhhc0ZvbGxvd2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlQ2hhdFJlcXVlc3QoZnVuY3Rpb25DYWxsUmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIWhhc0ZvbGxvd2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZSA9IG1lc3NhZ2VzQW5kRGF0YU9ySnVzdE1lc3NhZ2U7XG4gICAgICBpZiAoc3RyZWFtZWRSZXNwb25zZU1lc3NhZ2UuZnVuY3Rpb25fY2FsbCA9PT0gdm9pZCAwIHx8IHR5cGVvZiBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZS5mdW5jdGlvbl9jYWxsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbCkge1xuICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGwgPSBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZS5mdW5jdGlvbl9jYWxsO1xuICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGxSZXNwb25zZSA9IGF3YWl0IGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbChnZXRDdXJyZW50TWVzc2FnZXMoKSwgZnVuY3Rpb25DYWxsKTtcbiAgICAgICAgaWYgKGZ1bmN0aW9uQ2FsbFJlc3BvbnNlID09PSB2b2lkIDApXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIHVwZGF0ZUNoYXRSZXF1ZXN0KGZ1bmN0aW9uQ2FsbFJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gcmVhY3QvdXNlLWNoYXQudHNcbnZhciBnZXRTdHJlYW1lZFJlc3BvbnNlID0gYXN5bmMgKGFwaSwgY2hhdFJlcXVlc3QsIG11dGF0ZSwgbXV0YXRlU3RyZWFtRGF0YSwgZXhpc3RpbmdEYXRhLCBleHRyYU1ldGFkYXRhUmVmLCBtZXNzYWdlc1JlZiwgYWJvcnRDb250cm9sbGVyUmVmLCBvbkZpbmlzaCwgb25SZXNwb25zZSwgc2VuZEV4dHJhTWVzc2FnZUZpZWxkcykgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBwcmV2aW91c01lc3NhZ2VzID0gbWVzc2FnZXNSZWYuY3VycmVudDtcbiAgbXV0YXRlKGNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLCBmYWxzZSk7XG4gIGNvbnN0IGNvbnN0cnVjdGVkTWVzc2FnZXNQYXlsb2FkID0gc2VuZEV4dHJhTWVzc2FnZUZpZWxkcyA/IGNoYXRSZXF1ZXN0Lm1lc3NhZ2VzIDogY2hhdFJlcXVlc3QubWVzc2FnZXMubWFwKCh7IHJvbGUsIGNvbnRlbnQsIG5hbWUsIGZ1bmN0aW9uX2NhbGwgfSkgPT4gKHtcbiAgICByb2xlLFxuICAgIGNvbnRlbnQsXG4gICAgLi4ubmFtZSAhPT0gdm9pZCAwICYmIHsgbmFtZSB9LFxuICAgIC4uLmZ1bmN0aW9uX2NhbGwgIT09IHZvaWQgMCAmJiB7XG4gICAgICBmdW5jdGlvbl9jYWxsXG4gICAgfVxuICB9KSk7XG4gIGlmICh0eXBlb2YgYXBpICE9PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgcmVwbHlJZCA9IG5hbm9pZCgpO1xuICAgIGNvbnN0IGNyZWF0ZWRBdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIGxldCByZXNwb25zZU1lc3NhZ2UgPSB7XG4gICAgICBpZDogcmVwbHlJZCxcbiAgICAgIGNyZWF0ZWRBdCxcbiAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICByb2xlOiBcImFzc2lzdGFudFwiXG4gICAgfTtcbiAgICBhc3luYyBmdW5jdGlvbiByZWFkUm93KHByb21pc2UpIHtcbiAgICAgIGNvbnN0IHsgY29udGVudCwgdWksIG5leHQgfSA9IGF3YWl0IHByb21pc2U7XG4gICAgICByZXNwb25zZU1lc3NhZ2VbXCJjb250ZW50XCJdID0gY29udGVudDtcbiAgICAgIHJlc3BvbnNlTWVzc2FnZVtcInVpXCJdID0gYXdhaXQgdWk7XG4gICAgICBtdXRhdGUoWy4uLmNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLCB7IC4uLnJlc3BvbnNlTWVzc2FnZSB9XSwgZmFsc2UpO1xuICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgYXdhaXQgcmVhZFJvdyhuZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBhcGkoe1xuICAgICAgICBtZXNzYWdlczogY29uc3RydWN0ZWRNZXNzYWdlc1BheWxvYWQsXG4gICAgICAgIGRhdGE6IGNoYXRSZXF1ZXN0LmRhdGFcbiAgICAgIH0pO1xuICAgICAgYXdhaXQgcmVhZFJvdyhwcm9taXNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBtdXRhdGUocHJldmlvdXNNZXNzYWdlcywgZmFsc2UpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgaWYgKG9uRmluaXNoKSB7XG4gICAgICBvbkZpbmlzaChyZXNwb25zZU1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzcG9uc2VNZXNzYWdlO1xuICB9XG4gIHJldHVybiBhd2FpdCBjYWxsQXBpKHtcbiAgICBhcGksXG4gICAgbWVzc2FnZXM6IGNvbnN0cnVjdGVkTWVzc2FnZXNQYXlsb2FkLFxuICAgIGJvZHk6IHtcbiAgICAgIGRhdGE6IGNoYXRSZXF1ZXN0LmRhdGEsXG4gICAgICAuLi5leHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQuYm9keSxcbiAgICAgIC4uLihfYSA9IGNoYXRSZXF1ZXN0Lm9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ib2R5LFxuICAgICAgLi4uY2hhdFJlcXVlc3QuZnVuY3Rpb25zICE9PSB2b2lkIDAgJiYge1xuICAgICAgICBmdW5jdGlvbnM6IGNoYXRSZXF1ZXN0LmZ1bmN0aW9uc1xuICAgICAgfSxcbiAgICAgIC4uLmNoYXRSZXF1ZXN0LmZ1bmN0aW9uX2NhbGwgIT09IHZvaWQgMCAmJiB7XG4gICAgICAgIGZ1bmN0aW9uX2NhbGw6IGNoYXRSZXF1ZXN0LmZ1bmN0aW9uX2NhbGxcbiAgICAgIH1cbiAgICB9LFxuICAgIGNyZWRlbnRpYWxzOiBleHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQuY3JlZGVudGlhbHMsXG4gICAgaGVhZGVyczoge1xuICAgICAgLi4uZXh0cmFNZXRhZGF0YVJlZi5jdXJyZW50LmhlYWRlcnMsXG4gICAgICAuLi4oX2IgPSBjaGF0UmVxdWVzdC5vcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2IuaGVhZGVyc1xuICAgIH0sXG4gICAgYWJvcnRDb250cm9sbGVyOiAoKSA9PiBhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCxcbiAgICBhcHBlbmRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICAgIG11dGF0ZShbLi4uY2hhdFJlcXVlc3QubWVzc2FnZXMsIG1lc3NhZ2VdLCBmYWxzZSk7XG4gICAgfSxcbiAgICByZXN0b3JlTWVzc2FnZXNPbkZhaWx1cmUoKSB7XG4gICAgICBtdXRhdGUocHJldmlvdXNNZXNzYWdlcywgZmFsc2UpO1xuICAgIH0sXG4gICAgb25SZXNwb25zZSxcbiAgICBvblVwZGF0ZShtZXJnZWQsIGRhdGEpIHtcbiAgICAgIG11dGF0ZShbLi4uY2hhdFJlcXVlc3QubWVzc2FnZXMsIC4uLm1lcmdlZF0sIGZhbHNlKTtcbiAgICAgIG11dGF0ZVN0cmVhbURhdGEoWy4uLmV4aXN0aW5nRGF0YSB8fCBbXSwgLi4uZGF0YSB8fCBbXV0sIGZhbHNlKTtcbiAgICB9LFxuICAgIG9uRmluaXNoXG4gIH0pO1xufTtcbmZ1bmN0aW9uIHVzZUNoYXQoe1xuICBhcGkgPSBcIi9hcGkvY2hhdFwiLFxuICBpZCxcbiAgaW5pdGlhbE1lc3NhZ2VzLFxuICBpbml0aWFsSW5wdXQgPSBcIlwiLFxuICBzZW5kRXh0cmFNZXNzYWdlRmllbGRzLFxuICBleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwsXG4gIG9uUmVzcG9uc2UsXG4gIG9uRmluaXNoLFxuICBvbkVycm9yLFxuICBjcmVkZW50aWFscyxcbiAgaGVhZGVycyxcbiAgYm9keVxufSA9IHt9KSB7XG4gIGNvbnN0IGhvb2tJZCA9IHVzZUlkKCk7XG4gIGNvbnN0IGNoYXRJZCA9IGlkIHx8IGhvb2tJZDtcbiAgY29uc3QgW2luaXRpYWxNZXNzYWdlc0ZhbGxiYWNrXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgeyBkYXRhOiBtZXNzYWdlcywgbXV0YXRlIH0gPSB1c2VTV1IoW2FwaSwgY2hhdElkXSwgbnVsbCwge1xuICAgIGZhbGxiYWNrRGF0YTogaW5pdGlhbE1lc3NhZ2VzICE9IG51bGwgPyBpbml0aWFsTWVzc2FnZXMgOiBpbml0aWFsTWVzc2FnZXNGYWxsYmFja1xuICB9KTtcbiAgY29uc3QgeyBkYXRhOiBpc0xvYWRpbmcgPSBmYWxzZSwgbXV0YXRlOiBtdXRhdGVMb2FkaW5nIH0gPSB1c2VTV1IoXG4gICAgW2NoYXRJZCwgXCJsb2FkaW5nXCJdLFxuICAgIG51bGxcbiAgKTtcbiAgY29uc3QgeyBkYXRhOiBzdHJlYW1EYXRhLCBtdXRhdGU6IG11dGF0ZVN0cmVhbURhdGEgfSA9IHVzZVNXUihbY2hhdElkLCBcInN0cmVhbURhdGFcIl0sIG51bGwpO1xuICBjb25zdCBtZXNzYWdlc1JlZiA9IHVzZVJlZihtZXNzYWdlcyB8fCBbXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbWVzc2FnZXNSZWYuY3VycmVudCA9IG1lc3NhZ2VzIHx8IFtdO1xuICB9LCBbbWVzc2FnZXNdKTtcbiAgY29uc3QgYWJvcnRDb250cm9sbGVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBleHRyYU1ldGFkYXRhUmVmID0gdXNlUmVmKHtcbiAgICBjcmVkZW50aWFscyxcbiAgICBoZWFkZXJzLFxuICAgIGJvZHlcbiAgfSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZXh0cmFNZXRhZGF0YVJlZi5jdXJyZW50ID0ge1xuICAgICAgY3JlZGVudGlhbHMsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keVxuICAgIH07XG4gIH0sIFtjcmVkZW50aWFscywgaGVhZGVycywgYm9keV0pO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKCk7XG4gIGNvbnN0IHRyaWdnZXJSZXF1ZXN0ID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKGNoYXRSZXF1ZXN0KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBtdXRhdGVMb2FkaW5nKHRydWUpO1xuICAgICAgICBzZXRFcnJvcih2b2lkIDApO1xuICAgICAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gYWJvcnRDb250cm9sbGVyO1xuICAgICAgICBhd2FpdCBwcm9jZXNzQ2hhdFN0cmVhbSh7XG4gICAgICAgICAgZ2V0U3RyZWFtZWRSZXNwb25zZTogKCkgPT4gZ2V0U3RyZWFtZWRSZXNwb25zZShcbiAgICAgICAgICAgIGFwaSxcbiAgICAgICAgICAgIGNoYXRSZXF1ZXN0LFxuICAgICAgICAgICAgbXV0YXRlLFxuICAgICAgICAgICAgbXV0YXRlU3RyZWFtRGF0YSxcbiAgICAgICAgICAgIHN0cmVhbURhdGEsXG4gICAgICAgICAgICBleHRyYU1ldGFkYXRhUmVmLFxuICAgICAgICAgICAgbWVzc2FnZXNSZWYsXG4gICAgICAgICAgICBhYm9ydENvbnRyb2xsZXJSZWYsXG4gICAgICAgICAgICBvbkZpbmlzaCxcbiAgICAgICAgICAgIG9uUmVzcG9uc2UsXG4gICAgICAgICAgICBzZW5kRXh0cmFNZXNzYWdlRmllbGRzXG4gICAgICAgICAgKSxcbiAgICAgICAgICBleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwsXG4gICAgICAgICAgdXBkYXRlQ2hhdFJlcXVlc3Q6IChjaGF0UmVxdWVzdFBhcmFtKSA9PiB7XG4gICAgICAgICAgICBjaGF0UmVxdWVzdCA9IGNoYXRSZXF1ZXN0UGFyYW07XG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRDdXJyZW50TWVzc2FnZXM6ICgpID0+IG1lc3NhZ2VzUmVmLmN1cnJlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJyLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvbkVycm9yICYmIGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHNldEVycm9yKGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBtdXRhdGVMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtcbiAgICAgIG11dGF0ZSxcbiAgICAgIG11dGF0ZUxvYWRpbmcsXG4gICAgICBhcGksXG4gICAgICBleHRyYU1ldGFkYXRhUmVmLFxuICAgICAgb25SZXNwb25zZSxcbiAgICAgIG9uRmluaXNoLFxuICAgICAgb25FcnJvcixcbiAgICAgIHNldEVycm9yLFxuICAgICAgbXV0YXRlU3RyZWFtRGF0YSxcbiAgICAgIHN0cmVhbURhdGEsXG4gICAgICBzZW5kRXh0cmFNZXNzYWdlRmllbGRzLFxuICAgICAgZXhwZXJpbWVudGFsX29uRnVuY3Rpb25DYWxsLFxuICAgICAgbWVzc2FnZXNSZWYuY3VycmVudCxcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50XG4gICAgXVxuICApO1xuICBjb25zdCBhcHBlbmQgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAobWVzc2FnZSwgeyBvcHRpb25zLCBmdW5jdGlvbnMsIGZ1bmN0aW9uX2NhbGwsIGRhdGEgfSA9IHt9KSA9PiB7XG4gICAgICBpZiAoIW1lc3NhZ2UuaWQpIHtcbiAgICAgICAgbWVzc2FnZS5pZCA9IG5hbm9pZCgpO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hhdFJlcXVlc3QgPSB7XG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1JlZi5jdXJyZW50LmNvbmNhdChtZXNzYWdlKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgLi4uZnVuY3Rpb25zICE9PSB2b2lkIDAgJiYgeyBmdW5jdGlvbnMgfSxcbiAgICAgICAgLi4uZnVuY3Rpb25fY2FsbCAhPT0gdm9pZCAwICYmIHsgZnVuY3Rpb25fY2FsbCB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRyaWdnZXJSZXF1ZXN0KGNoYXRSZXF1ZXN0KTtcbiAgICB9LFxuICAgIFt0cmlnZ2VyUmVxdWVzdF1cbiAgKTtcbiAgY29uc3QgcmVsb2FkID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHsgb3B0aW9ucywgZnVuY3Rpb25zLCBmdW5jdGlvbl9jYWxsIH0gPSB7fSkgPT4ge1xuICAgICAgaWYgKG1lc3NhZ2VzUmVmLmN1cnJlbnQubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gbWVzc2FnZXNSZWYuY3VycmVudFttZXNzYWdlc1JlZi5jdXJyZW50Lmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGxhc3RNZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgY29uc3QgY2hhdFJlcXVlc3QyID0ge1xuICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1JlZi5jdXJyZW50LnNsaWNlKDAsIC0xKSxcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgIC4uLmZ1bmN0aW9ucyAhPT0gdm9pZCAwICYmIHsgZnVuY3Rpb25zIH0sXG4gICAgICAgICAgLi4uZnVuY3Rpb25fY2FsbCAhPT0gdm9pZCAwICYmIHsgZnVuY3Rpb25fY2FsbCB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0cmlnZ2VyUmVxdWVzdChjaGF0UmVxdWVzdDIpO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hhdFJlcXVlc3QgPSB7XG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1JlZi5jdXJyZW50LFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICAuLi5mdW5jdGlvbnMgIT09IHZvaWQgMCAmJiB7IGZ1bmN0aW9ucyB9LFxuICAgICAgICAuLi5mdW5jdGlvbl9jYWxsICE9PSB2b2lkIDAgJiYgeyBmdW5jdGlvbl9jYWxsIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gdHJpZ2dlclJlcXVlc3QoY2hhdFJlcXVlc3QpO1xuICAgIH0sXG4gICAgW3RyaWdnZXJSZXF1ZXN0XVxuICApO1xuICBjb25zdCBzdG9wID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCkge1xuICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQuYWJvcnQoKTtcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gIH0sIFtdKTtcbiAgY29uc3Qgc2V0TWVzc2FnZXMgPSB1c2VDYWxsYmFjayhcbiAgICAobWVzc2FnZXMyKSA9PiB7XG4gICAgICBtdXRhdGUobWVzc2FnZXMyLCBmYWxzZSk7XG4gICAgICBtZXNzYWdlc1JlZi5jdXJyZW50ID0gbWVzc2FnZXMyO1xuICAgIH0sXG4gICAgW211dGF0ZV1cbiAgKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZShpbml0aWFsSW5wdXQpO1xuICBjb25zdCBoYW5kbGVTdWJtaXQgPSB1c2VDYWxsYmFjayhcbiAgICAoZSwgb3B0aW9ucyA9IHt9LCBtZXRhZGF0YSkgPT4ge1xuICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgIGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudCA9IHtcbiAgICAgICAgICAuLi5leHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQsXG4gICAgICAgICAgLi4ubWV0YWRhdGFcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghaW5wdXQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGFwcGVuZChcbiAgICAgICAge1xuICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgIGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKTtcbiAgICAgIHNldElucHV0KFwiXCIpO1xuICAgIH0sXG4gICAgW2lucHV0LCBhcHBlbmRdXG4gICk7XG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gKGUpID0+IHtcbiAgICBzZXRJbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgbWVzc2FnZXM6IG1lc3NhZ2VzIHx8IFtdLFxuICAgIGVycm9yLFxuICAgIGFwcGVuZCxcbiAgICByZWxvYWQsXG4gICAgc3RvcCxcbiAgICBzZXRNZXNzYWdlcyxcbiAgICBpbnB1dCxcbiAgICBzZXRJbnB1dCxcbiAgICBoYW5kbGVJbnB1dENoYW5nZSxcbiAgICBoYW5kbGVTdWJtaXQsXG4gICAgaXNMb2FkaW5nLFxuICAgIGRhdGE6IHN0cmVhbURhdGFcbiAgfTtcbn1cblxuLy8gcmVhY3QvdXNlLWNvbXBsZXRpb24udHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMiwgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDIsIHVzZUlkIGFzIHVzZUlkMiwgdXNlUmVmIGFzIHVzZVJlZjIsIHVzZVN0YXRlIGFzIHVzZVN0YXRlMiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHVzZVNXUjIgZnJvbSBcInN3clwiO1xuZnVuY3Rpb24gdXNlQ29tcGxldGlvbih7XG4gIGFwaSA9IFwiL2FwaS9jb21wbGV0aW9uXCIsXG4gIGlkLFxuICBpbml0aWFsQ29tcGxldGlvbiA9IFwiXCIsXG4gIGluaXRpYWxJbnB1dCA9IFwiXCIsXG4gIGNyZWRlbnRpYWxzLFxuICBoZWFkZXJzLFxuICBib2R5LFxuICBvblJlc3BvbnNlLFxuICBvbkZpbmlzaCxcbiAgb25FcnJvclxufSA9IHt9KSB7XG4gIGNvbnN0IGhvb2tJZCA9IHVzZUlkMigpO1xuICBjb25zdCBjb21wbGV0aW9uSWQgPSBpZCB8fCBob29rSWQ7XG4gIGNvbnN0IHsgZGF0YSwgbXV0YXRlIH0gPSB1c2VTV1IyKFthcGksIGNvbXBsZXRpb25JZF0sIG51bGwsIHtcbiAgICBmYWxsYmFja0RhdGE6IGluaXRpYWxDb21wbGV0aW9uXG4gIH0pO1xuICBjb25zdCB7IGRhdGE6IGlzTG9hZGluZyA9IGZhbHNlLCBtdXRhdGU6IG11dGF0ZUxvYWRpbmcgfSA9IHVzZVNXUjIoXG4gICAgW2NvbXBsZXRpb25JZCwgXCJsb2FkaW5nXCJdLFxuICAgIG51bGxcbiAgKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTIodm9pZCAwKTtcbiAgY29uc3QgY29tcGxldGlvbiA9IGRhdGE7XG4gIGNvbnN0IFthYm9ydENvbnRyb2xsZXIsIHNldEFib3J0Q29udHJvbGxlcl0gPSB1c2VTdGF0ZTIobnVsbCk7XG4gIGNvbnN0IGV4dHJhTWV0YWRhdGFSZWYgPSB1c2VSZWYyKHtcbiAgICBjcmVkZW50aWFscyxcbiAgICBoZWFkZXJzLFxuICAgIGJvZHlcbiAgfSk7XG4gIHVzZUVmZmVjdDIoKCkgPT4ge1xuICAgIGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudCA9IHtcbiAgICAgIGNyZWRlbnRpYWxzLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHlcbiAgICB9O1xuICB9LCBbY3JlZGVudGlhbHMsIGhlYWRlcnMsIGJvZHldKTtcbiAgY29uc3QgdHJpZ2dlclJlcXVlc3QgPSB1c2VDYWxsYmFjazIoXG4gICAgYXN5bmMgKHByb21wdCwgb3B0aW9ucykgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbXV0YXRlTG9hZGluZyh0cnVlKTtcbiAgICAgICAgc2V0RXJyb3Iodm9pZCAwKTtcbiAgICAgICAgY29uc3QgYWJvcnRDb250cm9sbGVyMiA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgc2V0QWJvcnRDb250cm9sbGVyKGFib3J0Q29udHJvbGxlcjIpO1xuICAgICAgICBtdXRhdGUoXCJcIiwgZmFsc2UpO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChhcGksIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHByb21wdCxcbiAgICAgICAgICAgIC4uLmV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5ib2R5LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5ib2R5XG4gICAgICAgICAgfSksXG4gICAgICAgICAgY3JlZGVudGlhbHM6IGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5jcmVkZW50aWFscyxcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAuLi5leHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQuaGVhZGVycyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaGVhZGVyc1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIyLnNpZ25hbFxuICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9uUmVzcG9uc2UpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgb25SZXNwb25zZShyZXMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGF3YWl0IHJlcy50ZXh0KCkgfHwgXCJGYWlsZWQgdG8gZmV0Y2ggdGhlIGNoYXQgcmVzcG9uc2UuXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVzLmJvZHkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVzcG9uc2UgYm9keSBpcyBlbXB0eS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHJlcy5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gY3JlYXRlQ2h1bmtEZWNvZGVyKCk7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdCArPSBkZWNvZGVyKHZhbHVlKTtcbiAgICAgICAgICBtdXRhdGUocmVzdWx0LCBmYWxzZSk7XG4gICAgICAgICAgaWYgKGFib3J0Q29udHJvbGxlcjIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlYWRlci5jYW5jZWwoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob25GaW5pc2gpIHtcbiAgICAgICAgICBvbkZpbmlzaChwcm9tcHQsIHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QWJvcnRDb250cm9sbGVyKG51bGwpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgICBzZXRBYm9ydENvbnRyb2xsZXIobnVsbCk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0RXJyb3IoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIG11dGF0ZUxvYWRpbmcoZmFsc2UpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW1xuICAgICAgbXV0YXRlLFxuICAgICAgbXV0YXRlTG9hZGluZyxcbiAgICAgIGFwaSxcbiAgICAgIGV4dHJhTWV0YWRhdGFSZWYsXG4gICAgICBzZXRBYm9ydENvbnRyb2xsZXIsXG4gICAgICBvblJlc3BvbnNlLFxuICAgICAgb25GaW5pc2gsXG4gICAgICBvbkVycm9yLFxuICAgICAgc2V0RXJyb3JcbiAgICBdXG4gICk7XG4gIGNvbnN0IHN0b3AgPSB1c2VDYWxsYmFjazIoKCkgPT4ge1xuICAgIGlmIChhYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2V0QWJvcnRDb250cm9sbGVyKG51bGwpO1xuICAgIH1cbiAgfSwgW2Fib3J0Q29udHJvbGxlcl0pO1xuICBjb25zdCBzZXRDb21wbGV0aW9uID0gdXNlQ2FsbGJhY2syKFxuICAgIChjb21wbGV0aW9uMikgPT4ge1xuICAgICAgbXV0YXRlKGNvbXBsZXRpb24yLCBmYWxzZSk7XG4gICAgfSxcbiAgICBbbXV0YXRlXVxuICApO1xuICBjb25zdCBjb21wbGV0ZSA9IHVzZUNhbGxiYWNrMihcbiAgICBhc3luYyAocHJvbXB0LCBvcHRpb25zKSA9PiB7XG4gICAgICByZXR1cm4gdHJpZ2dlclJlcXVlc3QocHJvbXB0LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIFt0cmlnZ2VyUmVxdWVzdF1cbiAgKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZTIoaW5pdGlhbElucHV0KTtcbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gdXNlQ2FsbGJhY2syKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIWlucHV0KVxuICAgICAgICByZXR1cm47XG4gICAgICByZXR1cm4gY29tcGxldGUoaW5wdXQpO1xuICAgIH0sXG4gICAgW2lucHV0LCBjb21wbGV0ZV1cbiAgKTtcbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZSkgPT4ge1xuICAgIHNldElucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBjb21wbGV0aW9uLFxuICAgIGNvbXBsZXRlLFxuICAgIGVycm9yLFxuICAgIHNldENvbXBsZXRpb24sXG4gICAgc3RvcCxcbiAgICBpbnB1dCxcbiAgICBzZXRJbnB1dCxcbiAgICBoYW5kbGVJbnB1dENoYW5nZSxcbiAgICBoYW5kbGVTdWJtaXQsXG4gICAgaXNMb2FkaW5nXG4gIH07XG59XG5cbi8vIHJlYWN0L3VzZS1hc3Npc3RhbnQudHNcbmltcG9ydCB7IHVzZVN0YXRlIGFzIHVzZVN0YXRlMyB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBzaGFyZWQvcHJvY2Vzcy1tZXNzYWdlLXN0cmVhbS50c1xuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc01lc3NhZ2VTdHJlYW0ocmVhZGVyLCBwcm9jZXNzTWVzc2FnZSkge1xuICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gIGxldCBidWZmZXIgPSBcIlwiO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgaWYgKGRvbmUpIHtcbiAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBwcm9jZXNzTWVzc2FnZShidWZmZXIpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XG4gICAgbGV0IGVuZEluZGV4O1xuICAgIHdoaWxlICgoZW5kSW5kZXggPSBidWZmZXIuaW5kZXhPZihcIlxcblwiKSkgIT09IC0xKSB7XG4gICAgICBwcm9jZXNzTWVzc2FnZShidWZmZXIuc3Vic3RyaW5nKDAsIGVuZEluZGV4KS50cmltKCkpO1xuICAgICAgYnVmZmVyID0gYnVmZmVyLnN1YnN0cmluZyhlbmRJbmRleCArIDEpO1xuICAgIH1cbiAgfVxufVxuXG4vLyByZWFjdC91c2UtYXNzaXN0YW50LnRzXG5mdW5jdGlvbiBleHBlcmltZW50YWxfdXNlQXNzaXN0YW50KHtcbiAgYXBpLFxuICB0aHJlYWRJZDogdGhyZWFkSWRQYXJhbVxufSkge1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlMyhbXSk7XG4gIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUzKFwiXCIpO1xuICBjb25zdCBbdGhyZWFkSWQsIHNldFRocmVhZElkXSA9IHVzZVN0YXRlMyh2b2lkIDApO1xuICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUzKFwiYXdhaXRpbmdfbWVzc2FnZVwiKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTModm9pZCAwKTtcbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZSkgPT4ge1xuICAgIHNldElucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgfTtcbiAgY29uc3Qgc3VibWl0TWVzc2FnZSA9IGFzeW5jIChlKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoaW5wdXQgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0U3RhdHVzKFwiaW5fcHJvZ3Jlc3NcIik7XG4gICAgc2V0TWVzc2FnZXMoKG1lc3NhZ2VzMikgPT4gW1xuICAgICAgLi4ubWVzc2FnZXMyLFxuICAgICAgeyBpZDogXCJcIiwgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IGlucHV0IH1cbiAgICBdKTtcbiAgICBzZXRJbnB1dChcIlwiKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZXRjaChhcGksIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIC8vIGFsd2F5cyB1c2UgdXNlci1wcm92aWRlZCB0aHJlYWRJZCB3aGVuIGF2YWlsYWJsZTpcbiAgICAgICAgdGhyZWFkSWQ6IChfYSA9IHRocmVhZElkUGFyYW0gIT0gbnVsbCA/IHRocmVhZElkUGFyYW0gOiB0aHJlYWRJZCkgIT0gbnVsbCA/IF9hIDogbnVsbCxcbiAgICAgICAgbWVzc2FnZTogaW5wdXRcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgaWYgKHJlc3VsdC5ib2R5ID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSByZXNwb25zZSBib2R5IGlzIGVtcHR5LlwiKTtcbiAgICB9XG4gICAgYXdhaXQgcHJvY2Vzc01lc3NhZ2VTdHJlYW0ocmVzdWx0LmJvZHkuZ2V0UmVhZGVyKCksIChtZXNzYWdlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHR5cGUsIHZhbHVlIH0gPSBwYXJzZVN0cmVhbVBhcnQobWVzc2FnZSk7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJhc3Npc3RhbnRfbWVzc2FnZVwiOiB7XG4gICAgICAgICAgICBzZXRNZXNzYWdlcygobWVzc2FnZXMyKSA9PiBbXG4gICAgICAgICAgICAgIC4uLm1lc3NhZ2VzMixcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICByb2xlOiB2YWx1ZS5yb2xlLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHZhbHVlLmNvbnRlbnRbMF0udGV4dC52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlIFwiYXNzaXN0YW50X2NvbnRyb2xfZGF0YVwiOiB7XG4gICAgICAgICAgICBzZXRUaHJlYWRJZCh2YWx1ZS50aHJlYWRJZCk7XG4gICAgICAgICAgICBzZXRNZXNzYWdlcygobWVzc2FnZXMyKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gbWVzc2FnZXMyW21lc3NhZ2VzMi5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgbGFzdE1lc3NhZ2UuaWQgPSB2YWx1ZS5tZXNzYWdlSWQ7XG4gICAgICAgICAgICAgIHJldHVybiBbLi4ubWVzc2FnZXMyLnNsaWNlKDAsIG1lc3NhZ2VzMi5sZW5ndGggLSAxKSwgbGFzdE1lc3NhZ2VdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSBcImVycm9yXCI6IHtcbiAgICAgICAgICAgIHNldEVycm9yKHZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IyKSB7XG4gICAgICAgIHNldEVycm9yKGVycm9yMik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgc2V0U3RhdHVzKFwiYXdhaXRpbmdfbWVzc2FnZVwiKTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBtZXNzYWdlcyxcbiAgICB0aHJlYWRJZCxcbiAgICBpbnB1dCxcbiAgICBoYW5kbGVJbnB1dENoYW5nZSxcbiAgICBzdWJtaXRNZXNzYWdlLFxuICAgIHN0YXR1cyxcbiAgICBlcnJvclxuICB9O1xufVxuZXhwb3J0IHtcbiAgZXhwZXJpbWVudGFsX3VzZUFzc2lzdGFudCxcbiAgdXNlQ2hhdCxcbiAgdXNlQ29tcGxldGlvblxufTtcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZUlkIiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VTV1IiLCJjdXN0b21BbHBoYWJldCIsInRleHRTdHJlYW1QYXJ0IiwiY29kZSIsIm5hbWUiLCJwYXJzZSIsInZhbHVlIiwiRXJyb3IiLCJ0eXBlIiwiZnVuY3Rpb25DYWxsU3RyZWFtUGFydCIsImZ1bmN0aW9uX2NhbGwiLCJhcmd1bWVudHMiLCJkYXRhU3RyZWFtUGFydCIsIkFycmF5IiwiaXNBcnJheSIsImVycm9yU3RyZWFtUGFydCIsImFzc2lzdGFudE1lc3NhZ2UiLCJpZCIsInJvbGUiLCJjb250ZW50IiwiZXZlcnkiLCJpdGVtIiwidGV4dCIsImFzc2lzdGFudENvbnRyb2xEYXRhIiwidGhyZWFkSWQiLCJtZXNzYWdlSWQiLCJzdHJlYW1QYXJ0cyIsInN0cmVhbVBhcnRzQnlDb2RlIiwiU3RyZWFtU3RyaW5nUHJlZml4ZXMiLCJ2YWxpZENvZGVzIiwibWFwIiwicGFydCIsInBhcnNlU3RyZWFtUGFydCIsImxpbmUiLCJmaXJzdFNlcGFyYXRvckluZGV4IiwiaW5kZXhPZiIsInByZWZpeCIsInNsaWNlIiwiaW5jbHVkZXMiLCJ0ZXh0VmFsdWUiLCJqc29uVmFsdWUiLCJKU09OIiwibmFub2lkIiwiY3JlYXRlQ2h1bmtEZWNvZGVyIiwiY29tcGxleCIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsImNodW5rIiwiZGVjb2RlIiwic3RyZWFtIiwiZGVjb2RlZCIsInNwbGl0IiwiZmlsdGVyIiwiQm9vbGVhbiIsIkNPTVBMRVhfSEVBREVSIiwibmFub2lkMiIsInBhcnNlQ29tcGxleFJlc3BvbnNlIiwicmVhZGVyIiwiYWJvcnRDb250cm9sbGVyUmVmIiwidXBkYXRlIiwib25GaW5pc2giLCJnZW5lcmF0ZUlkIiwiZ2V0Q3VycmVudERhdGUiLCJEYXRlIiwiY3JlYXRlZEF0IiwicHJlZml4TWFwIiwiZGF0YSIsIk5FV0xJTkUiLCJjaGFyQ29kZUF0IiwiY2h1bmtzIiwidG90YWxMZW5ndGgiLCJyZWFkIiwicHVzaCIsImxlbmd0aCIsImNvbmNhdGVuYXRlZENodW5rcyIsIlVpbnQ4QXJyYXkiLCJvZmZzZXQiLCJzZXQiLCJsaW5lcyIsInZhbHVlMiIsImZ1bmN0aW9uQ2FsbE1lc3NhZ2UiLCJyZXNwb25zZU1lc3NhZ2UiLCJtZXJnZWQiLCJjdXJyZW50IiwiY2FuY2VsIiwibWVzc2FnZXMiLCJjYWxsQXBpIiwiYXBpIiwiYm9keSIsImNyZWRlbnRpYWxzIiwiaGVhZGVycyIsImFib3J0Q29udHJvbGxlciIsImFwcGVuZE1lc3NhZ2UiLCJyZXN0b3JlTWVzc2FnZXNPbkZhaWx1cmUiLCJvblJlc3BvbnNlIiwib25VcGRhdGUiLCJfYSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJzdHJpbmdpZnkiLCJzaWduYWwiLCJjYXRjaCIsImVyciIsIm9rIiwiZ2V0UmVhZGVyIiwiaXNDb21wbGV4TW9kZSIsImdldCIsInN0cmVhbWVkUmVzcG9uc2UiLCJyZXBseUlkIiwiZG9uZSIsInN0YXJ0c1dpdGgiLCJwYXJzZWRGdW5jdGlvbkNhbGwiLCJwcm9jZXNzQ2hhdFN0cmVhbSIsImdldFN0cmVhbWVkUmVzcG9uc2UiLCJnZXRTdHJlYW1lZFJlc3BvbnNlMiIsImV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbCIsInVwZGF0ZUNoYXRSZXF1ZXN0IiwiZ2V0Q3VycmVudE1lc3NhZ2VzIiwibWVzc2FnZXNBbmREYXRhT3JKdXN0TWVzc2FnZSIsImhhc0ZvbGxvd2luZ1Jlc3BvbnNlIiwibWVzc2FnZSIsImZ1bmN0aW9uQ2FsbCIsImZ1bmN0aW9uQ2FsbFJlc3BvbnNlIiwic3RyZWFtZWRSZXNwb25zZU1lc3NhZ2UiLCJjaGF0UmVxdWVzdCIsIm11dGF0ZSIsIm11dGF0ZVN0cmVhbURhdGEiLCJleGlzdGluZ0RhdGEiLCJleHRyYU1ldGFkYXRhUmVmIiwibWVzc2FnZXNSZWYiLCJzZW5kRXh0cmFNZXNzYWdlRmllbGRzIiwiX2IiLCJwcmV2aW91c01lc3NhZ2VzIiwiY29uc3RydWN0ZWRNZXNzYWdlc1BheWxvYWQiLCJyZWFkUm93IiwicHJvbWlzZSIsInVpIiwibmV4dCIsImUiLCJvcHRpb25zIiwiZnVuY3Rpb25zIiwidXNlQ2hhdCIsImluaXRpYWxNZXNzYWdlcyIsImluaXRpYWxJbnB1dCIsIm9uRXJyb3IiLCJob29rSWQiLCJjaGF0SWQiLCJpbml0aWFsTWVzc2FnZXNGYWxsYmFjayIsImZhbGxiYWNrRGF0YSIsImlzTG9hZGluZyIsIm11dGF0ZUxvYWRpbmciLCJzdHJlYW1EYXRhIiwiZXJyb3IiLCJzZXRFcnJvciIsInRyaWdnZXJSZXF1ZXN0IiwiQWJvcnRDb250cm9sbGVyIiwiY2hhdFJlcXVlc3RQYXJhbSIsImFwcGVuZCIsImNvbmNhdCIsInJlbG9hZCIsImxhc3RNZXNzYWdlIiwiY2hhdFJlcXVlc3QyIiwic3RvcCIsImFib3J0Iiwic2V0TWVzc2FnZXMiLCJtZXNzYWdlczIiLCJpbnB1dCIsInNldElucHV0IiwiaGFuZGxlU3VibWl0IiwibWV0YWRhdGEiLCJwcmV2ZW50RGVmYXVsdCIsImhhbmRsZUlucHV0Q2hhbmdlIiwidGFyZ2V0IiwidXNlQ2FsbGJhY2syIiwidXNlRWZmZWN0MiIsInVzZUlkMiIsInVzZVJlZjIiLCJ1c2VTdGF0ZTIiLCJ1c2VTV1IyIiwidXNlQ29tcGxldGlvbiIsImluaXRpYWxDb21wbGV0aW9uIiwiY29tcGxldGlvbklkIiwiY29tcGxldGlvbiIsInNldEFib3J0Q29udHJvbGxlciIsInByb21wdCIsImFib3J0Q29udHJvbGxlcjIiLCJyZXMiLCJyZXN1bHQiLCJzZXRDb21wbGV0aW9uIiwiY29tcGxldGlvbjIiLCJjb21wbGV0ZSIsInVzZVN0YXRlMyIsInByb2Nlc3NNZXNzYWdlU3RyZWFtIiwicHJvY2Vzc01lc3NhZ2UiLCJidWZmZXIiLCJlbmRJbmRleCIsInN1YnN0cmluZyIsInRyaW0iLCJleHBlcmltZW50YWxfdXNlQXNzaXN0YW50IiwidGhyZWFkSWRQYXJhbSIsInNldFRocmVhZElkIiwic3RhdHVzIiwic2V0U3RhdHVzIiwic3VibWl0TWVzc2FnZSIsImVycm9yMiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ai/react/dist/index.mjs\n");

/***/ })

};
;